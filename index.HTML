<!DOCTYPE html>

<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø³ÛŒØ³ØªÙ… ÙØ§Ú©ØªÙˆØ± ØµÙ†Ø§ÛŒØ¹ Ø¯Ø³ØªÛŒ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

```
    body {
        font-family: 'Tahoma', Arial, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 20px;
    }

    .container {
        max-width: 800px;
        margin: 0 auto;
        background: white;
        border-radius: 15px;
        box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        overflow: hidden;
    }

    .header {
        background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
        color: white;
        padding: 30px;
        text-align: center;
        position: relative;
    }

    .header::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Ccircle cx='30' cy='30' r='2'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
    }

    .logo {
        font-size: 2.5em;
        margin-bottom: 10px;
        position: relative;
        z-index: 1;
    }

    .company-info {
        position: relative;
        z-index: 1;
    }

    .form-container {
        padding: 40px;
    }

    .section {
        margin-bottom: 30px;
        padding: 25px;
        background: #f8f9fa;
        border-radius: 12px;
        border-left: 5px solid #667eea;
    }

    .section h3 {
        color: #2c3e50;
        margin-bottom: 20px;
        font-size: 1.3em;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .section h3::before {
        content: 'ğŸ“‹';
        font-size: 1.2em;
    }

    .form-row {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
        margin-bottom: 20px;
    }

    .form-group {
        display: flex;
        flex-direction: column;
    }

    label {
        font-weight: bold;
        color: #34495e;
        margin-bottom: 8px;
        font-size: 0.95em;
    }

    input, textarea, select {
        padding: 12px 15px;
        border: 2px solid #e1e8ed;
        border-radius: 8px;
        font-size: 14px;
        transition: all 0.3s ease;
        font-family: inherit;
    }

    input:focus, textarea:focus, select:focus {
        outline: none;
        border-color: #667eea;
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        transform: translateY(-1px);
    }

    .item-card {
        background: white;
        border: 2px solid #e1e8ed;
        border-radius: 12px;
        padding: 25px;
        margin-bottom: 20px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        transition: all 0.3s ease;
    }

    .item-card:hover {
        border-color: #667eea;
        box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        transform: translateY(-2px);
    }

    .add-item-form {
        background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        border-radius: 15px;
        padding: 25px;
        margin-bottom: 30px;
        border: 2px dashed #667eea;
    }

    .added-item {
        background: white;
        border: 2px solid #27ae60;
        border-radius: 12px;
        padding: 20px;
        margin-bottom: 15px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        position: relative;
        transition: all 0.3s ease;
    }

    .added-item:hover {
        box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        transform: translateY(-2px);
    }

    .item-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
        padding-bottom: 10px;
        border-bottom: 2px solid #f1f2f6;
    }

    .item-number {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 8px 15px;
        border-radius: 20px;
        font-weight: bold;
        font-size: 14px;
    }

    .item-remove {
        background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
        color: white;
        border: none;
        padding: 8px 15px;
        border-radius: 20px;
        cursor: pointer;
        font-size: 12px;
        transition: all 0.3s ease;
    }

    .item-remove:hover {
        transform: scale(1.1);
        box-shadow: 0 5px 15px rgba(231, 76, 60, 0.3);
    }

    .item-details {
        display: grid;
        grid-template-columns: 2fr 1fr 1fr;
        gap: 20px;
        align-items: center;
    }

    .item-name {
        font-size: 18px;
        font-weight: bold;
        color: #2c3e50;
        margin-bottom: 5px;
    }

    .item-info {
        color: #7f8c8d;
        font-size: 14px;
    }

    .item-price {
        text-align: center;
        font-size: 16px;
        color: #34495e;
    }

    .item-total {
        text-align: center;
        font-size: 18px;
        font-weight: bold;
        color: #27ae60;
    }

    .price-badge {
        background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
        color: white;
        padding: 5px 12px;
        border-radius: 15px;
        font-size: 14px;
        font-weight: bold;
        display: inline-block;
        margin: 2px 0;
    }

    .total-badge {
        background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
        color: white;
        padding: 8px 15px;
        border-radius: 20px;
        font-size: 16px;
        font-weight: bold;
        display: inline-block;
    }

    .empty-items {
        background: #f8f9fa;
        border: 2px dashed #dee2e6;
        border-radius: 12px;
        padding: 40px;
        text-align: center;
        color: #6c757d;
        font-style: italic;
        margin: 20px 0;
    }

    /* Ù…ÙˆØ¨Ø§ÛŒÙ„ - Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ */
    @media (max-width: 768px) {
        .item-details {
            grid-template-columns: 1fr;
            gap: 15px;
            text-align: center;
        }
        
        .item-header {
            flex-direction: column;
            gap: 10px;
        }
        
        .item-name {
            font-size: 16px;
        }
        
        .add-item-form {
            padding: 20px;
        }
        
        .item-card {
            padding: 20px;
        }
        
        input, select {
            font-size: 16px !important;
            padding: 12px !important;
        }
    }

    .btn {
        padding: 12px 25px;
        border: none;
        border-radius: 8px;
        font-size: 14px;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s ease;
        margin: 5px;
    }

    .btn-primary {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
    }

    .btn-secondary {
        background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
        color: white;
    }

    .btn-success {
        background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
        color: white;
    }

    .btn-danger {
        background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
        color: white;
    }

    .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }

    .total-section {
        background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
        color: white;
        padding: 25px;
        border-radius: 12px;
        margin-top: 20px;
    }

    .total-row {
        display: flex;
        justify-content: space-between;
        margin-bottom: 10px;
        padding: 10px 0;
        border-bottom: 1px solid rgba(255,255,255,0.2);
    }

    .total-row:last-child {
        border-bottom: none;
        font-size: 1.2em;
        font-weight: bold;
        color: #f39c12;
    }

    .actions {
        text-align: center;
        margin-top: 30px;
        padding: 20px;
        background: #f8f9fa;
        border-radius: 12px;
    }

    /* Ú†Ø§Ù¾ */
    @media print {
        body {
            background: white;
            padding: 0;
        }
        
        .container {
            box-shadow: none;
            border-radius: 0;
            max-width: none;
        }
        
        .form-container {
            padding: 20px;
        }
        
        .section {
            break-inside: avoid;
            background: white;
            border: 1px solid #ddd;
        }
        
        .actions, .btn {
            display: none;
        }
        
        .items-table {
            font-size: 12px;
        }
        
        .header {
            background: #2c3e50 !important;
            -webkit-print-color-adjust: exact;
            print-color-adjust: exact;
        }
    }

    /* Ù…ÙˆØ¨Ø§ÛŒÙ„ */
    @media (max-width: 768px) {
        body {
            padding: 10px;
        }
        
        .form-container {
            padding: 20px;
        }
        
        .form-row {
            grid-template-columns: 1fr;
        }
        
        .items-table {
            font-size: 12px;
        }
        
        .items-table th,
        .items-table td {
            padding: 8px 5px;
        }
        
        .logo {
            font-size: 2em;
        }
        
        .header {
            padding: 20px;
        }
    }

    .preview-section {
        display: none;
        margin-top: 30px;
        padding: 20px;
        background: white;
        border: 2px solid #667eea;
        border-radius: 12px;
    }

    .invoice-preview {
        font-family: 'Tahoma', Arial, sans-serif;
        line-height: 1.6;
    }

    .preview-header {
        text-align: center;
        border-bottom: 3px solid #2c3e50;
        padding-bottom: 20px;
        margin-bottom: 30px;
    }

    .preview-info {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 30px;
        margin-bottom: 30px;
    }

    .info-box {
        padding: 15px;
        border: 1px solid #ddd;
        border-radius: 8px;
        background: #f9f9f9;
    }

    .info-box h4 {
        color: #2c3e50;
        margin-bottom: 10px;
        border-bottom: 2px solid #667eea;
        padding-bottom: 5px;
    }

    /* Ø§Ù†ÛŒÙ…ÛŒØ´Ù†â€ŒÙ‡Ø§ */
    .section {
        animation: fadeInUp 0.6s ease;
    }

    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(30px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .success-message {
        background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
        color: white;
        padding: 15px;
        border-radius: 8px;
        margin: 20px 0;
        text-align: center;
        display: none;
        animation: slideIn 0.5s ease;
    }

    @keyframes slideIn {
        from {
            opacity: 0;
            transform: translateX(-100%);
        }
        to {
            opacity: 1;
            transform: translateX(0);
        }
    }
</style>
```

</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">ğŸ¨ ØµÙ†Ø§ÛŒØ¹ Ø¯Ø³ØªÛŒ</div>
            <div class="company-info">
                <input type="text" id="companyName" placeholder="Ù†Ø§Ù… Ø´Ø±Ú©Øª / ÙØ±ÙˆØ´Ú¯Ø§Ù‡" 
                       style="background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.3); color: white; text-align: center; margin: 5px 0;">
                <br>
                <input type="text" id="companyAddress" placeholder="Ø¢Ø¯Ø±Ø³" 
                       style="background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.3); color: white; text-align: center; margin: 5px 0;">
                <br>
                <input type="text" id="companyPhone" placeholder="ØªÙ„ÙÙ† ØªÙ…Ø§Ø³" 
                       style="background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.3); color: white; text-align: center; margin: 5px 0;">
            </div>
        </div>

```
    <div class="form-container">
        <div class="success-message" id="successMessage">
            âœ… Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯!
        </div>

        <!-- Ø§Ø·Ù„Ø§Ø¹Ø§Øª ÙØ§Ú©ØªÙˆØ± -->
        <div class="section">
            <h3>ğŸ“‹ Ø§Ø·Ù„Ø§Ø¹Ø§Øª ÙØ§Ú©ØªÙˆØ±</h3>
            <div class="form-row">
                <div class="form-group">
                    <label>Ø´Ù…Ø§Ø±Ù‡ ÙØ§Ú©ØªÙˆØ±</label>
                    <input type="text" id="invoiceNumber" placeholder="Ù…Ø«Ø§Ù„: 1001">
                </div>
                <div class="form-group">
                    <label>ØªØ§Ø±ÛŒØ® ÙØ§Ú©ØªÙˆØ±</label>
                    <input type="text" id="invoiceDate" placeholder="1403/05/22">
                </div>
                <div class="form-group">
                    <label>Ù†ÙˆØ¹ Ù¾Ø±Ø¯Ø§Ø®Øª</label>
                    <select id="paymentType">
                        <option value="Ù†Ù‚Ø¯ÛŒ">Ù†Ù‚Ø¯ÛŒ</option>
                        <option value="Ú†Ú©ÛŒ">Ú†Ú©ÛŒ</option>
                        <option value="Ø§Ø¹ØªØ¨Ø§Ø±ÛŒ">Ø§Ø¹ØªØ¨Ø§Ø±ÛŒ</option>
                        <option value="Ú©Ø§Ø±Øª Ø¨Ù‡ Ú©Ø§Ø±Øª">Ú©Ø§Ø±Øª Ø¨Ù‡ Ú©Ø§Ø±Øª</option>
                        <option value="Ø¢Ù†Ù„Ø§ÛŒÙ†">Ù¾Ø±Ø¯Ø§Ø®Øª Ø¢Ù†Ù„Ø§ÛŒÙ†</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù…Ø´ØªØ±ÛŒ -->
        <div class="section">
            <h3>ğŸ‘¤ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù…Ø´ØªØ±ÛŒ</h3>
            <div class="form-row">
                <div class="form-group">
                    <label>Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ</label>
                    <input type="text" id="customerName" placeholder="Ù†Ø§Ù… Ú©Ø§Ù…Ù„ Ù…Ø´ØªØ±ÛŒ">
                </div>
                <div class="form-group">
                    <label>Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³</label>
                    <input type="tel" id="customerPhone" placeholder="09123456789">
                </div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label>Ø¢Ø¯Ø±Ø³</label>
                    <textarea id="customerAddress" rows="3" placeholder="Ø¢Ø¯Ø±Ø³ Ú©Ø§Ù…Ù„ Ù…Ø´ØªØ±ÛŒ"></textarea>
                </div>
                <div class="form-group">
                    <label>Ú©Ø¯ Ù…Ù„ÛŒ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)</label>
                    <input type="text" id="customerNationalId" placeholder="1234567890">
                </div>
            </div>
        </div>

        <!-- Ú©Ø§Ù„Ø§Ù‡Ø§ Ùˆ Ø®Ø¯Ù…Ø§Øª -->
        <div class="section">
            <h3>ğŸ“¦ Ú©Ø§Ù„Ø§Ù‡Ø§ Ùˆ Ø®Ø¯Ù…Ø§Øª</h3>
            
            <!-- ÙØ±Ù… Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ú©Ø§Ù„Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ -->
            <div class="add-item-form">
                <h4 style="color: #2c3e50; margin-bottom: 20px; font-size: 1.1em;">â• Ø§ÙØ²ÙˆØ¯Ù† Ú©Ø§Ù„Ø§ÛŒ Ø¬Ø¯ÛŒØ¯</h4>
                <div class="item-card">
                    <div class="form-row">
                        <div class="form-group">
                            <label>Ø´Ø±Ø­ Ú©Ø§Ù„Ø§ *</label>
                            <input type="text" id="newItemName" placeholder="Ù…Ø«Ø§Ù„: Ú¯Ù„Ø¯Ø§Ù† Ø³ÙØ§Ù„ÛŒ Ø¯Ø³Øª Ø³Ø§Ø²" style="font-size: 16px; padding: 15px;">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>ØªØ¹Ø¯Ø§Ø¯</label>
                            <input type="number" id="newItemQuantity" value="1" min="1" style="font-size: 18px; padding: 15px; text-align: center;">
                        </div>
                        <div class="form-group">
                            <label>ÙˆØ§Ø­Ø¯</label>
                            <select id="newItemUnit" style="font-size: 16px; padding: 15px;">
                                <option value="Ø¹Ø¯Ø¯">Ø¹Ø¯Ø¯</option>
                                <option value="Ø¯Ø³Øª">Ø¯Ø³Øª</option>
                                <option value="Ø¬ÙØª">Ø¬ÙØª</option>
                                <option value="Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…">Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…</option>
                                <option value="Ù…ØªØ±">Ù…ØªØ±</option>
                                <option value="Ø¨Ø³ØªÙ‡">Ø¨Ø³ØªÙ‡</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Ù‚ÛŒÙ…Øª ÙˆØ§Ø­Ø¯ (Ø±ÛŒØ§Ù„) *</label>
                            <input type="number" id="newItemPrice" placeholder="500000" style="font-size: 18px; padding: 15px; text-align: center;">
                        </div>
                        <div class="form-group">
                            <label>ØªØ®ÙÛŒÙ (%)</label>
                            <input type="number" id="newItemDiscount" value="0" min="0" max="100" style="font-size: 18px; padding: 15px; text-align: center;">
                        </div>
                    </div>
                    <div class="form-row" style="justify-content: center; margin-top: 20px;">
                        <button class="btn btn-success" onclick="addNewItem()" style="font-size: 16px; padding: 15px 30px;">
                            âœ… Ø«Ø¨Øª Ú©Ø§Ù„Ø§
                        </button>
                    </div>
                </div>
            </div>

            <!-- Ù„ÛŒØ³Øª Ú©Ø§Ù„Ø§Ù‡Ø§ÛŒ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯Ù‡ -->
            <div class="items-list" id="itemsList">
                <h4 style="color: #2c3e50; margin: 30px 0 20px 0; font-size: 1.1em;">ğŸ“‹ Ú©Ø§Ù„Ø§Ù‡Ø§ÛŒ Ø«Ø¨Øª Ø´Ø¯Ù‡</h4>
                <div class="empty-items" id="emptyItems" style="text-align: center; padding: 40px; color: #7f8c8d; font-style: italic;">
                    Ù‡Ù†ÙˆØ² Ú©Ø§Ù„Ø§ÛŒÛŒ Ø§Ø¶Ø§ÙÙ‡ Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª
                </div>
            </div>
        </div>

        <!-- Ø¬Ù…Ø¹ Ú©Ù„ -->
        <div class="total-section">
            <div class="total-row">
                <span>Ø¬Ù…Ø¹ Ú©Ù„ (Ø¨Ø¯ÙˆÙ† ØªØ®ÙÛŒÙ):</span>
                <span id="subtotal">0 Ø±ÛŒØ§Ù„</span>
            </div>
            <div class="total-row">
                <span>Ù…Ø¬Ù…ÙˆØ¹ ØªØ®ÙÛŒÙ:</span>
                <span id="totalDiscount">0 Ø±ÛŒØ§Ù„</span>
            </div>
            <div class="total-row">
                <span>Ù…Ø§Ù„ÛŒØ§Øª Ø¨Ø± Ø§Ø±Ø²Ø´ Ø§ÙØ²ÙˆØ¯Ù‡ (9%):</span>
                <span id="tax">0 Ø±ÛŒØ§Ù„</span>
            </div>
            <div class="total-row">
                <span>Ù…Ø¨Ù„Øº Ù‚Ø§Ø¨Ù„ Ù¾Ø±Ø¯Ø§Ø®Øª:</span>
                <span id="finalTotal">0 Ø±ÛŒØ§Ù„</span>
            </div>
        </div>

        <!-- ÛŒØ§Ø¯Ø¯Ø§Ø´Øª -->
        <div class="section">
            <h3>ğŸ“ ÛŒØ§Ø¯Ø¯Ø§Ø´Øª</h3>
            <textarea id="notes" rows="4" placeholder="ÛŒØ§Ø¯Ø¯Ø§Ø´Øª Ù‡Ø§ÛŒ Ø§Ø¶Ø§ÙÛŒØŒ ØªÙˆØ¶ÛŒØ­Ø§Øª ÙˆÛŒÚ˜Ù‡ØŒ Ø´Ø±Ø§ÛŒØ· ÙØ±ÙˆØ´ Ùˆ ..."></textarea>
        </div>

        <!-- Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ø¹Ù…Ù„ÛŒØ§Øª -->
        <div class="actions">
            <button class="btn btn-success" onclick="generatePreview()">ğŸ‘ï¸ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´</button>
            <button class="btn btn-primary" onclick="printInvoice()">ğŸ–¨ï¸ Ú†Ø§Ù¾ ÙØ§Ú©ØªÙˆØ±</button>
            <button class="btn btn-secondary" onclick="downloadPDF()">ğŸ“¥ Ø¯Ø§Ù†Ù„ÙˆØ¯ PDF</button>
            <button class="btn btn-primary" onclick="saveData()">ğŸ’¾ Ø°Ø®ÛŒØ±Ù‡ Ø§Ø·Ù„Ø§Ø¹Ø§Øª</button>
            <button class="btn btn-danger" onclick="clearAll()">ğŸ—‘ï¸ Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ù‡Ù…Ù‡</button>
        </div>

        <!-- Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´ ÙØ§Ú©ØªÙˆØ± -->
        <div class="preview-section" id="previewSection">
            <div class="invoice-preview" id="invoicePreview">
                <!-- Ù…Ø­ØªÙˆØ§ÛŒ Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´ Ø§ÛŒÙ†Ø¬Ø§ Ù‚Ø±Ø§Ø± Ù…ÛŒâ€ŒÚ¯ÛŒØ±Ø¯ -->
            </div>
        </div>
    </div>
</div>

<script>
    // Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ø³Ø±Ø§Ø³Ø±ÛŒ
    let invoiceData = {};
    let itemsArray = [];
    
    // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù‡
    window.onload = function() {
        loadSavedData();
        calculateTotals();
        setCurrentDate();
        updateItemsDisplay();
    };

    // ØªÙ†Ø¸ÛŒÙ… ØªØ§Ø±ÛŒØ® ÙØ¹Ù„ÛŒ
    function setCurrentDate() {
        const today = new Date();
        const shamsiDate = today.toLocaleDateString('fa-IR');
        document.getElementById('invoiceDate').value = shamsiDate;
    }

    // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ú©Ø§Ù„Ø§ÛŒ Ø¬Ø¯ÛŒØ¯
    function addNewItem() {
        const name = document.getElementById('newItemName').value.trim();
        const quantity = parseInt(document.getElementById('newItemQuantity').value) || 1;
        const unit = document.getElementById('newItemUnit').value;
        const price = parseFloat(document.getElementById('newItemPrice').value) || 0;
        const discount = parseFloat(document.getElementById('newItemDiscount').value) || 0;
        
        if (!name) {
            alert('Ù„Ø·ÙØ§ Ø´Ø±Ø­ Ú©Ø§Ù„Ø§ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
            document.getElementById('newItemName').focus();
            return;
        }
        
        if (price <= 0) {
            alert('Ù„Ø·ÙØ§ Ù‚ÛŒÙ…Øª Ù…Ø¹ØªØ¨Ø± ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
            document.getElementById('newItemPrice').focus();
            return;
        }
        
        const item = {
            id: Date.now(),
            name: name,
            quantity: quantity,
            unit: unit,
            price: price,
            discount: discount
        };
        
        itemsArray.push(item);
        
        // Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† ÙØ±Ù…
        document.getElementById('newItemName').value = '';
        document.getElementById('newItemQuantity').value = '1';
        document.getElementById('newItemUnit').selectedIndex = 0;
        document.getElementById('newItemPrice').value = '';
        document.getElementById('newItemDiscount').value = '0';
        
        updateItemsDisplay();
        calculateTotals();
        showSuccessMessage('Ú©Ø§Ù„Ø§ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯');
        
        // ÙÙˆÚ©Ø³ Ø±ÙˆÛŒ Ù†Ø§Ù… Ú©Ø§Ù„Ø§ÛŒ Ø¨Ø¹Ø¯ÛŒ
        document.getElementById('newItemName').focus();
    }

    // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù†Ù…Ø§ÛŒØ´ Ú©Ø§Ù„Ø§Ù‡Ø§
    function updateItemsDisplay() {
        const itemsList = document.getElementById('itemsList');
        const emptyItems = document.getElementById('emptyItems');
        
        if (itemsArray.length === 0) {
            emptyItems.style.display = 'block';
            // Ø­Ø°Ù ØªÙ…Ø§Ù… Ú©Ø§Ù„Ø§Ù‡Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ø´Ø¯Ù‡
            const existingItems = itemsList.querySelectorAll('.added-item');
            existingItems.forEach(item => item.remove());
            return;
        }
        
        emptyItems.style.display = 'none';
        
        // Ø­Ø°Ù Ú©Ø§Ù„Ø§Ù‡Ø§ÛŒ Ù‚Ø¨Ù„ÛŒ
        const existingItems = itemsList.querySelectorAll('.added-item');
        existingItems.forEach(item => item.remove());
        
        // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ú©Ø§Ù„Ø§Ù‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯
        itemsArray.forEach((item, index) => {
            const lineTotal = item.quantity * item.price;
            const discountAmount = (lineTotal * item.discount) / 100;
            const finalTotal = lineTotal - discountAmount;
            
            const itemElement = document.createElement('div');
            itemElement.className = 'added-item';
            itemElement.innerHTML = `
                <div class="item-header">
                    <div class="item-number">Ø±Ø¯ÛŒÙ ${index + 1}</div>
                    <button class="item-remove" onclick="removeItem(${item.id})">ğŸ—‘ï¸ Ø­Ø°Ù</button>
                </div>
                <div class="item-details">
                    <div>
                        <div class="item-name">${item.name}</div>
                        <div class="item-info">${item.quantity} ${item.unit}</div>
                        ${item.discount > 0 ? `<div class="item-info">ØªØ®ÙÛŒÙ: ${item.discount}%</div>` : ''}
                    </div>
                    <div class="item-price">
                        <div class="price-badge">${item.price.toLocaleString('fa-IR')} Ø±ÛŒØ§Ù„</div>
                        <div style="font-size: 12px; color: #7f8c8d; margin-top: 5px;">Ù‚ÛŒÙ…Øª ÙˆØ§Ø­Ø¯</div>
                    </div>
                    <div class="item-total">
                        <div class="total-badge">${finalTotal.toLocaleString('fa-IR')} Ø±ÛŒØ§Ù„</div>
                        <div style="font-size: 12px; color: #7f8c8d; margin-top: 5px;">Ù…Ø¨Ù„Øº Ú©Ù„</div>
                    </div>
                </div>
            `;
            itemsList.appendChild(itemElement);
        });
    }

    // Ø­Ø°Ù Ú©Ø§Ù„Ø§
    function removeItem(itemId) {
        if (confirm('Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ Ú©Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø§ÛŒÙ† Ú©Ø§Ù„Ø§ Ø±Ø§ Ø­Ø°Ù Ú©Ù†ÛŒØ¯ØŸ')) {
            itemsArray = itemsArray.filter(item => item.id !== itemId);
            updateItemsDisplay();
            calculateTotals();
            showSuccessMessage('Ú©Ø§Ù„Ø§ Ø­Ø°Ù Ø´Ø¯');
        }
    }

    // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…Ø¬Ù…ÙˆØ¹
    function calculateTotals() {
        let subtotal = 0;
        let totalDiscountAmount = 0;

        itemsArray.forEach(item => {
            const lineTotal = item.quantity * item.price;
            const discountAmount = (lineTotal * item.discount) / 100;
            
            subtotal += lineTotal;
            totalDiscountAmount += discountAmount;
        });

        const afterDiscount = subtotal - totalDiscountAmount;
        const tax = afterDiscount * 0.09;
        const finalTotal = afterDiscount + tax;

        document.getElementById('subtotal').textContent = subtotal.toLocaleString('fa-IR') + ' Ø±ÛŒØ§Ù„';
        document.getElementById('totalDiscount').textContent = totalDiscountAmount.toLocaleString('fa-IR') + ' Ø±ÛŒØ§Ù„';
        document.getElementById('tax').textContent = tax.toLocaleString('fa-IR') + ' Ø±ÛŒØ§Ù„';
        document.getElementById('finalTotal').textContent = finalTotal.toLocaleString('fa-IR') + ' Ø±ÛŒØ§Ù„';
    }

    // ÙÙ‚Ø· Ø¨Ø±Ø§ÛŒ Ø³Ø§Ø²Ú¯Ø§Ø±ÛŒ Ø¨Ø§ Ú©Ø¯Ù‡Ø§ÛŒ Ù‚Ø¯ÛŒÙ…ÛŒ
    function addRow() {
        document.getElementById('newItemName').focus();
    }

    function removeRow(btn) {
        // Ø§ÛŒÙ† ØªØ§Ø¨Ø¹ Ø¯ÛŒÚ¯Ø± Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯
    }

    function updateRowNumbers() {
        // Ø§ÛŒÙ† ØªØ§Ø¨Ø¹ Ø¯ÛŒÚ¯Ø± Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯
    }

    // ØªÙˆÙ„ÛŒØ¯ Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´
    function generatePreview() {
        const previewSection = document.getElementById('previewSection');
        const preview = document.getElementById('invoicePreview');
        
        // Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª
        const companyName = document.getElementById('companyName').value || 'Ù†Ø§Ù… Ø´Ø±Ú©Øª';
        const companyAddress = document.getElementById('companyAddress').value || 'Ø¢Ø¯Ø±Ø³ Ø´Ø±Ú©Øª';
        const companyPhone = document.getElementById('companyPhone').value || 'Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³';
        
        const invoiceNumber = document.getElementById('invoiceNumber').value || 'Ø´Ù…Ø§Ø±Ù‡ ÙØ§Ú©ØªÙˆØ±';
        const invoiceDate = document.getElementById('invoiceDate').value || 'ØªØ§Ø±ÛŒØ®';
        const paymentType = document.getElementById('paymentType').value;
        
        const customerName = document.getElementById('customerName').value || 'Ù†Ø§Ù… Ù…Ø´ØªØ±ÛŒ';
        const customerPhone = document.getElementById('customerPhone').value || 'Ø´Ù…Ø§Ø±Ù‡ Ù…Ø´ØªØ±ÛŒ';
        const customerAddress = document.getElementById('customerAddress').value || 'Ø¢Ø¯Ø±Ø³ Ù…Ø´ØªØ±ÛŒ';
        
        // ØªÙˆÙ„ÛŒØ¯ HTML Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´
        let itemsHTML = '';
        const table = document.getElementById('itemsTable').getElementsByTagName('tbody')[0];
        
        for (let i = 0; i < table.rows.length; i++) {
            const row = table.rows[i];
            const description = row.cells[1].querySelector('input').value || '';
            const quantity = row.cells[2].querySelector('input').value || '0';
            const unit = row.cells[3].querySelector('select').value;
            const price = row.cells[4].querySelector('input').value || '0';
            const discount = row.cells[5].querySelector('input').value || '0';
            const total = row.cells[6].textContent;
            
            if (description) {
                itemsHTML += `
                    <tr>
                        <td>${i + 1}</td>
                        <td>${description}</td>
                        <td>${quantity}</td>
                        <td>${unit}</td>
                        <td>${parseFloat(price).toLocaleString('fa-IR')}</td>
                        <td>${discount}%</td>
                        <td>${total}</td>
                    </tr>
                `;
            }
        }
        
        preview.innerHTML = `
            <div class="preview-header">
                <h1>ğŸ¨ ${companyName}</h1>
                <p>${companyAddress}</p>
                <p>ØªÙ„ÙÙ†: ${companyPhone}</p>
                <hr style="margin: 20px 0;">
                <h2>ÙØ§Ú©ØªÙˆØ± ÙØ±ÙˆØ´</h2>
            </div>
            
            <div class="preview-info">
                <div class="info-box">
                    <h4>Ø§Ø·Ù„Ø§Ø¹Ø§Øª ÙØ§Ú©ØªÙˆØ±</h4>
                    <p><strong>Ø´Ù…Ø§Ø±Ù‡ ÙØ§Ú©ØªÙˆØ±:</strong> ${invoiceNumber}</p>
                    <p><strong>ØªØ§Ø±ÛŒØ®:</strong> ${invoiceDate}</p>
                    <p><strong>Ù†ÙˆØ¹ Ù¾Ø±Ø¯Ø§Ø®Øª:</strong> ${paymentType}</p>
                </div>
                <div class="info-box">
                    <h4>Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù…Ø´ØªØ±ÛŒ</h4>
                    <p><strong>Ù†Ø§Ù…:</strong> ${customerName}</p>
                    <p><strong>ØªÙ„ÙÙ†:</strong> ${customerPhone}</p>
                    <p><strong>Ø¢Ø¯Ø±Ø³:</strong> ${customerAddress}</p>
                </div>
            </div>
            
            <table class="items-table" style="margin: 20px 0;">
                <thead>
                    <tr>
                        <th>Ø±Ø¯ÛŒÙ</th>
                        <th>Ø´Ø±Ø­ Ú©Ø§Ù„Ø§</th>
                        <th>ØªØ¹Ø¯Ø§Ø¯</th>
                        <th>ÙˆØ§Ø­Ø¯</th>
                        <th>Ù‚ÛŒÙ…Øª ÙˆØ§Ø­Ø¯</th>
                        <th>ØªØ®ÙÛŒÙ</th>
                        <th>Ù…Ø¨Ù„Øº Ú©Ù„</th>
                    </tr>
                </thead>
                <tbody>
                    ${itemsHTML}
                </tbody>
            </table>
            
            <div class="total-section">
                <div class="total-row">
                    <span>Ø¬Ù…Ø¹ Ú©Ù„ (Ø¨Ø¯ÙˆÙ† ØªØ®ÙÛŒÙ):</span>
                    <span>${document.getElementById('subtotal').textContent}</span>
                </div>
                <div class="total-row">
                    <span>Ù…Ø¬Ù…ÙˆØ¹ ØªØ®ÙÛŒÙ:</span>
                    <span>${document.getElementById('totalDiscount').textContent}</span>
                </div>
                <div class="total-row">
                    <span>Ù…Ø§Ù„ÛŒØ§Øª Ø¨Ø± Ø§Ø±Ø²Ø´ Ø§ÙØ²ÙˆØ¯Ù‡ (9%):</span>
                    <span>${document.getElementById('tax').textContent}</span>
                </div>
                <div class="total-row">
                    <span>Ù…Ø¨Ù„Øº Ù‚Ø§Ø¨Ù„ Ù¾Ø±Ø¯Ø§Ø®Øª:</span>
                    <span>${document.getElementById('finalTotal').textContent}</span>
                </div>
            </div>
            
            ${document.getElementById('notes').value ? `
            <div style="margin-top: 20px; padding: 15px; background: #f9f9f9; border-radius: 8px;">
                <h4>ÛŒØ§Ø¯Ø¯Ø§Ø´Øª:</h4>
                <p>${document.getElementById('notes').value}</p>
            </div>
            ` : ''}
        `;
        
        previewSection.style.display = 'block';
        previewSection.scrollIntoView({ behavior: 'smooth' });
        showSuccessMessage('Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´ ØªÙˆÙ„ÛŒØ¯ Ø´Ø¯');
    }

    // Ú†Ø§Ù¾ ÙØ§Ú©ØªÙˆØ±
    function printInvoice() {
        generatePreview();
        setTimeout(() => {
            window.print();
        }, 500);
    }

    // Ø¯Ø§Ù†Ù„ÙˆØ¯ PDF (Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ)
    function downloadPDF() {
        generatePreview();
        
        // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø¯Ø§Ù†Ù„ÙˆØ¯ PDF
        showSuccessMessage('Ø¯Ø± Ø­Ø§Ù„ Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ ÙØ§ÛŒÙ„ PDF...');
        
        setTimeout(() => {
            // Ø§ÛŒØ¬Ø§Ø¯ Ù…Ø­ØªÙˆØ§ÛŒ HTML Ø¨Ø±Ø§ÛŒ Ø¯Ø§Ù†Ù„ÙˆØ¯
            const content = document.getElementById('invoicePreview').innerHTML;
            const htmlContent = `
                <!DOCTYPE html>
                <html lang="fa" dir="rtl">
                <head>
                    <meta charset="UTF-8">
                    <title>ÙØ§Ú©ØªÙˆØ± ${document.getElementById('invoiceNumber').value || 'Ø¬Ø¯ÛŒØ¯'}</title>
                    <style>
                        body { font-family: Tahoma, Arial, sans-serif; margin: 20px; line-height: 1.6; }
                        .preview-header { text-align: center; border-bottom: 3px solid #2c3e50; padding-bottom: 20px; margin-bottom: 30px; }
                        .preview-info { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px; }
                        .info-box { padding: 15px; border: 1px solid #ddd; border-radius: 8px; background: #f9f9f9; }
                        .info-box h4 { color: #2c3e50; margin-bottom: 10px; border-bottom: 2px solid #667eea; padding-bottom: 5px; }
                        .items-table { width: 100%; border-collapse: collapse; margin: 20px 0; }
                        .items-table th { background: #2c3e50; color: white; padding: 12px; text-align: center; }
                        .items-table td { padding: 10px; text-align: center; border: 1px solid #ddd; }
                        .total-section { background: #f8f9fa; padding: 20px; border-radius: 8px; margin-top: 20px; }
                        .total-row { display: flex; justify-content: space-between; margin-bottom: 10px; padding: 5px 0; }
                    </style>
                </head>
                <body>${content}</body>
                </html>
            `;
            
            const blob = new Blob([htmlContent], { type: 'text/html;charset=utf-8' });
            const url = window.URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `ÙØ§Ú©ØªÙˆØ±_${document.getElementById('invoiceNumber').value || 'Ø¬Ø¯ÛŒØ¯'}.html`;
            link.click();
            window.URL.revokeObjectURL(url);
            
            showSuccessMessage('ÙØ§ÛŒÙ„ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¯Ø§Ù†Ù„ÙˆØ¯ Ø´Ø¯! (ÙØ±Ù…Øª HTML)');
        }, 1000);
    }

    // Ø°Ø®ÛŒØ±Ù‡ Ø§Ø·Ù„Ø§Ø¹Ø§Øª
    function saveData() {
        const data = {
            companyName: document.getElementById('companyName').value,
            companyAddress: document.getElementById('companyAddress').value,
            companyPhone: document.getElementById('companyPhone').value,
            invoiceNumber: document.getElementById('invoiceNumber').value,
            invoiceDate: document.getElementById('invoiceDate').value,
            paymentType: document.getElementById('paymentType').value,
            customerName: document.getElementById('customerName').value,
            customerPhone: document.getElementById('customerPhone').value,
            customerAddress: document.getElementById('customerAddress').value,
            customerNationalId: document.getElementById('customerNationalId').value,
            notes: document.getElementById('notes').value,
            items: []
        };
        
        // Ø°Ø®ÛŒØ±Ù‡ Ø§Ù‚Ù„Ø§Ù…
        const table = document.getElementById('itemsTable').getElementsByTagName('tbody')[0];
        for (let i = 0; i < table.rows.length; i++) {
            const row = table.rows[i];
            const item = {
                description: row.cells[1].querySelector('input').value,
                quantity: row.cells[2].querySelector('input').value,
                unit: row.cells[3].querySelector('select').value,
                price: row.cells[4].querySelector('input').value,
                discount: row.cells[5].querySelector('input').value
            };
            data.items.push(item);
        }
        
        // Ø°Ø®ÛŒØ±Ù‡ Ø¯Ø± Ø­Ø§ÙØ¸Ù‡ Ù…Ø­Ù„ÛŒ Ù…ØªØºÛŒØ±
        invoiceData = data;
        showSuccessMessage('Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯');
    }

    // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù‡
    function loadSavedData() {
        if (Object.keys(invoiceData).length === 0) return;
        
        const data = invoiceData;
        
        document.getElementById('companyName').value = data.companyName || '';
        document.getElementById('companyAddress').value = data.companyAddress || '';
        document.getElementById('companyPhone').value = data.companyPhone || '';
        document.getElementById('invoiceNumber').value = data.invoiceNumber || '';
        document.getElementById('invoiceDate').value = data.invoiceDate || '';
        document.getElementById('paymentType').value = data.paymentType || 'Ù†Ù‚Ø¯ÛŒ';
        document.getElementById('customerName').value = data.customerName || '';
        document.getElementById('customerPhone').value = data.customerPhone || '';
        document.getElementById('customerAddress').value = data.customerAddress || '';
        document.getElementById('customerNationalId').value = data.customerNationalId || '';
        document.getElementById('notes').value = data.notes || '';
        
        // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø§Ù‚Ù„Ø§Ù…
        if (data.items && data.items.length > 0) {
            const tbody = document.getElementById('itemsTable').getElementsByTagName('tbody')[0];
            tbody.innerHTML = ''; // Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ø±Ø¯ÛŒÙâ€ŒÙ‡Ø§ÛŒ Ù…ÙˆØ¬ÙˆØ¯
            
            data.items.forEach((item, index) => {
                const row = tbody.insertRow();
                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td><input type="text" value="${item.description || ''}" placeholder="Ø´Ø±Ø­ Ú©Ø§Ù„Ø§"></td>
                    <td><input type="number" value="${item.quantity || 1}" min="1" class="quantity" onchange="calculateTotals()"></td>
                    <td>
                        <select class="unit">
                            <option value="Ø¹Ø¯Ø¯" ${item.unit === 'Ø¹Ø¯Ø¯' ? 'selected' : ''}>Ø¹Ø¯Ø¯</option>
                            <option value="Ø¯Ø³Øª" ${item.unit === 'Ø¯Ø³Øª' ? 'selected' : ''}>Ø¯Ø³Øª</option>
                            <option value="Ø¬ÙØª" ${item.unit === 'Ø¬ÙØª' ? 'selected' : ''}>Ø¬ÙØª</option>
                            <option value="Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…" ${item.unit === 'Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…' ? 'selected' : ''}>Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…</option>
                            <option value="Ù…ØªØ±" ${item.unit === 'Ù…ØªØ±' ? 'selected' : ''}>Ù…ØªØ±</option>
                            <option value="Ø¨Ø³ØªÙ‡" ${item.unit === 'Ø¨Ø³ØªÙ‡' ? 'selected' : ''}>Ø¨Ø³ØªÙ‡</option>
                        </select>
                    </td>
                    <td><input type="number" value="${item.price || ''}" placeholder="Ù‚ÛŒÙ…Øª" class="price" onchange="calculateTotals()"></td>
                    <td><input type="number" value="${item.discount || 0}" min="0" max="100" class="discount" onchange="calculateTotals()"></td>
                    <td class="total">0</td>
                    <td><button class="btn btn-danger" onclick="removeRow(this)">Ø­Ø°Ù</button></td>
                `;
            });
            
            calculateTotals();
        }
    }

    // Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ù‡Ù…Ù‡ Ø§Ø·Ù„Ø§Ø¹Ø§Øª
    function clearAll() {
        if (confirm('Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ Ú©Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ù‡Ù…Ù‡ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù¾Ø§Ú© Ø´ÙˆØ¯ØŸ')) {
            // Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† ÙØ±Ù…
            document.querySelectorAll('input, textarea, select').forEach(element => {
                if (element.type === 'number') {
                    element.value = element.classList.contains('quantity') ? '1' : 
                                  element.classList.contains('discount') ? '0' : '';
                } else if (element.tagName === 'SELECT') {
                    element.selectedIndex = 0;
                } else {
                    element.value = '';
                }
            });
            
            // Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ Ø¬Ø¯ÙˆÙ„ Ø¨Ù‡ ÛŒÚ© Ø±Ø¯ÛŒÙ
            const tbody = document.getElementById('itemsTable').getElementsByTagName('tbody')[0];
            tbody.innerHTML = `
                <tr>
                    <td>1</td>
                    <td><input type="text" placeholder="Ù…Ø«Ø§Ù„: Ú¯Ù„Ø¯Ø§Ù† Ø³ÙØ§Ù„ÛŒ Ø¯Ø³Øª Ø³Ø§Ø²"></td>
                    <td><input type="number" value="1" min="1" class="quantity" onchange="calculateTotals()"></td>
                    <td>
                        <select class="unit">
                            <option value="Ø¹Ø¯Ø¯">Ø¹Ø¯Ø¯</option>
                            <option value="Ø¯Ø³Øª">Ø¯Ø³Øª</option>
                            <option value="Ø¬ÙØª">Ø¬ÙØª</option>
                            <option value="Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…">Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…</option>
                            <option value="Ù…ØªØ±">Ù…ØªØ±</option>
                            <option value="Ø¨Ø³ØªÙ‡">Ø¨Ø³ØªÙ‡</option>
                        </select>
                    </td>
                    <td><input type="number" placeholder="500000" class="price" onchange="calculateTotals()"></td>
                    <td><input type="number" value="0" min="0" max="100" class="discount" onchange="calculateTotals()"></td>
                    <td class="total">0</td>
                    <td><button class="btn btn-danger" onclick="removeRow(this)">Ø­Ø°Ù</button></td>
                </tr>
            `;
            
            // Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´
            document.getElementById('previewSection').style.display = 'none';
            
            // Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§
            invoiceData = {};
            
            // ØªÙ†Ø¸ÛŒÙ… Ù…Ø¬Ø¯Ø¯ ØªØ§Ø±ÛŒØ®
            setCurrentDate();
            
            calculateTotals();
            showSuccessMessage('Ù‡Ù…Ù‡ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù¾Ø§Ú© Ø´Ø¯');
        }
    }

    // Ù†Ù…Ø§ÛŒØ´ Ù¾ÛŒØ§Ù… Ù…ÙˆÙÙ‚ÛŒØª
    function showSuccessMessage(message) {
        const messageDiv = document.getElementById('successMessage');
        messageDiv.textContent = message;
        messageDiv.style.display = 'block';
        
        setTimeout(() => {
            messageDiv.style.display = 'none';
        }, 3000);
    }

    // Ú©Ù„ÛŒØ¯Ù‡Ø§ÛŒ Ù…ÛŒØ§Ù†Ø¨Ø±
    document.addEventListener('keydown', function(e) {
        if (e.ctrlKey || e.metaKey) {
            switch(e.key) {
                case 's':
                    e.preventDefault();
                    saveData();
                    break;
                case 'p':
                    e.preventDefault();
                    printInvoice();
                    break;
                case 'n':
                    e.preventDefault();
                    addRow();
                    break;
            }
        }
    });

    // Ø§ØªÙˆ Ú©Ø§Ù…Ù¾Ù„ÛŒØª Ø¨Ø±Ø§ÛŒ Ú©Ø§Ù„Ø§Ù‡Ø§ÛŒ ØµÙ†Ø§ÛŒØ¹ Ø¯Ø³ØªÛŒ
    const handicraftItems = [
        'Ú¯Ù„Ø¯Ø§Ù† Ø³ÙØ§Ù„ÛŒ Ø¯Ø³Øª Ø³Ø§Ø²',
        'Ø¨Ø´Ù‚Ø§Ø¨ Ù…Ø³ÛŒ Ù‚Ù„Ù…Ø²Ù†ÛŒ',
        'ØªØ§Ø¨Ù„Ùˆ ÙØ±Ø´ Ø¯Ø³ØªØ¨Ø§Ù',
        'Ø¸Ø±Ù Ú†ÙˆØ¨ÛŒ Ù…Ù†Ø¨Øª Ú©Ø§Ø±ÛŒ',
        'Ø¬Ø¹Ø¨Ù‡ Ø¬ÙˆØ§Ù‡Ø±Ø§Øª Ø®Ø§ØªÙ…',
        'Ø³Ø§Ø¹Øª Ø¯ÛŒÙˆØ§Ø±ÛŒ ØªØ°Ù‡ÛŒØ¨ÛŒ',
        'Ø¢ÛŒÙ†Ù‡ Ù‚Ø§Ø¨ Ù‚Ù„Ù…Ø²Ù†ÛŒ',
        'ØµÙ†Ø¯ÙˆÙ‚Ú†Ù‡ Ú†ÙˆØ¨ÛŒ Ù†Ù‚Ø§Ø´ÛŒ',
        'Ø±ÙˆÙ…ÛŒØ²ÛŒ Ø³ÙˆØ²Ù†Ø¯ÙˆØ²ÛŒ',
        'Ú©ÛŒÙ Ø³Ù†ØªÛŒ Ù‚Ù„Ø§Ø¨ Ø¨Ø§ÙÛŒ',
        'Ø´Ù…Ø¹Ø¯Ø§Ù† Ø¨Ø±Ù†Ø¬ÛŒ',
        'Ù¾Ø§Ø±Ú†Ù‡ Ù‚Ù„Ù…Ú©Ø§Ø±',
        'Ú¯ÛŒÙˆÙ‡ Ø¯Ø³ØªØ¨Ø§Ù',
        'Ú©ÙØ´ Ú†Ø±Ù… Ø¯Ø³Øª Ø¯ÙˆØ²',
        'Ø¬Ø§Ù‚Ù„Ù…ÛŒ Ù…Ù†Ø¨Øª Ú©Ø§Ø±ÛŒ',
        'ØªØ§Ø¨Ù„Ùˆ Ù†Ù‚Ø§Ø´ÛŒ Ø±ÙˆÛŒ Ú†Ø±Ù…'
    ];

    // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ù‚Ø§Ø¨Ù„ÛŒØª Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ø¨Ø±Ø§ÛŒ Ø´Ø±Ø­ Ú©Ø§Ù„Ø§
    document.addEventListener('input', function(e) {
        if (e.target.matches('input[placeholder*="Ø´Ø±Ø­ Ú©Ø§Ù„Ø§"]')) {
            const input = e.target;
            const value = input.value.toLowerCase();
            
            if (value.length > 2) {
                const suggestions = handicraftItems.filter(item => 
                    item.toLowerCase().includes(value)
                );
                
                // Ø§ÛŒØ¬Ø§Ø¯ dropdown Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯Ø§Øª (Ø³Ø§Ø¯Ù‡)
                let dropdown = input.parentNode.querySelector('.suggestions');
                if (dropdown) dropdown.remove();
                
                if (suggestions.length > 0) {
                    dropdown = document.createElement('div');
                    dropdown.className = 'suggestions';
                    dropdown.style.cssText = `
                        position: absolute;
                        background: white;
                        border: 1px solid #ddd;
                        border-radius: 5px;
                        max-height: 150px;
                        overflow-y: auto;
                        z-index: 1000;
                        width: 100%;
                        margin-top: 2px;
                        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
                    `;
                    
                    suggestions.slice(0, 5).forEach(suggestion => {
                        const item = document.createElement('div');
                        item.textContent = suggestion;
                        item.style.cssText = `
                            padding: 10px;
                            cursor: pointer;
                            border-bottom: 1px solid #eee;
                        `;
                        item.addEventListener('click', () => {
                            input.value = suggestion;
                            dropdown.remove();
                        });
                        item.addEventListener('mouseenter', () => {
                            item.style.background = '#f0f0f0';
                        });
                        item.addEventListener('mouseleave', () => {
                            item.style.background = 'white';
                        });
                        dropdown.appendChild(item);
                    });
                    
                    input.parentNode.style.position = 'relative';
                    input.parentNode.appendChild(dropdown);
                }
            }
        }
    });

    // Ù…Ø®ÙÛŒ Ú©Ø±Ø¯Ù† dropdown Ù‡Ù†Ú¯Ø§Ù… Ú©Ù„ÛŒÚ© Ø®Ø§Ø±Ø¬ Ø§Ø² Ø¢Ù†
    document.addEventListener('click', function(e) {
        if (!e.target.matches('input[placeholder*="Ø´Ø±Ø­ Ú©Ø§Ù„Ø§"]')) {
            document.querySelectorAll('.suggestions').forEach(s => s.remove());
        }
    });

    console.log('ğŸ¨ Ø³ÛŒØ³ØªÙ… ÙØ§Ú©ØªÙˆØ± ØµÙ†Ø§ÛŒØ¹ Ø¯Ø³ØªÛŒ Ø¢Ù…Ø§Ø¯Ù‡ Ø§Ø³Øª!');
    console.log('ğŸ’¡ Ú©Ù„ÛŒØ¯Ù‡Ø§ÛŒ Ù…ÛŒØ§Ù†Ø¨Ø±:');
    console.log('   Ctrl+S: Ø°Ø®ÛŒØ±Ù‡');
    console.log('   Ctrl+P: Ú†Ø§Ù¾');
    console.log('   Ctrl+N: Ø§ÙØ²ÙˆØ¯Ù† Ø±Ø¯ÛŒÙ Ø¬Ø¯ÛŒØ¯');
</script>
```

</body>
</html>
