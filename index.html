<!DOCTYPE html>

<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÿ≥€åÿ≥ÿ™ŸÖ ŸÅÿß⁄©ÿ™Ÿàÿ± ÿµŸÜÿß€åÿπ ÿØÿ≥ÿ™€å</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

```
    body {
        font-family: 'Tahoma', Arial, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 20px;
    }

    .container {
        max-width: 800px;
        margin: 0 auto;
        background: white;
        border-radius: 15px;
        box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        overflow: hidden;
    }

    .header {
        background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
        color: white;
        padding: 30px;
        text-align: center;
        position: relative;
    }

    .header::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Ccircle cx='30' cy='30' r='2'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
    }

    .logo {
        font-size: 2.5em;
        margin-bottom: 10px;
        position: relative;
        z-index: 1;
    }

    .company-info {
        position: relative;
        z-index: 1;
    }

    .form-container {
        padding: 40px;
    }

    .section {
        margin-bottom: 30px;
        padding: 25px;
        background: #f8f9fa;
        border-radius: 12px;
        border-left: 5px solid #667eea;
    }

    .section h3 {
        color: #2c3e50;
        margin-bottom: 20px;
        font-size: 1.3em;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .section h3::before {
        content: 'üìã';
        font-size: 1.2em;
    }

    .form-row {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
        margin-bottom: 20px;
    }

    .form-group {
        display: flex;
        flex-direction: column;
    }

    label {
        font-weight: bold;
        color: #34495e;
        margin-bottom: 8px;
        font-size: 0.95em;
    }

    input, textarea, select {
        padding: 12px 15px;
        border: 2px solid #e1e8ed;
        border-radius: 8px;
        font-size: 14px;
        transition: all 0.3s ease;
        font-family: inherit;
    }

    input:focus, textarea:focus, select:focus {
        outline: none;
        border-color: #667eea;
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        transform: translateY(-1px);
    }

    .item-card {
        background: white;
        border: 2px solid #e1e8ed;
        border-radius: 12px;
        padding: 25px;
        margin-bottom: 20px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        transition: all 0.3s ease;
    }

    .item-card:hover {
        border-color: #667eea;
        box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        transform: translateY(-2px);
    }

    .add-item-form {
        background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        border-radius: 15px;
        padding: 25px;
        margin-bottom: 30px;
        border: 2px dashed #667eea;
    }

    .added-item {
        background: white;
        border: 2px solid #27ae60;
        border-radius: 12px;
        padding: 20px;
        margin-bottom: 15px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        position: relative;
        transition: all 0.3s ease;
    }

    .added-item:hover {
        box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        transform: translateY(-2px);
    }

    .item-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
        padding-bottom: 10px;
        border-bottom: 2px solid #f1f2f6;
    }

    .item-number {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 8px 15px;
        border-radius: 20px;
        font-weight: bold;
        font-size: 14px;
    }

    .item-remove {
        background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
        color: white;
        border: none;
        padding: 8px 15px;
        border-radius: 20px;
        cursor: pointer;
        font-size: 12px;
        transition: all 0.3s ease;
    }

    .item-remove:hover {
        transform: scale(1.1);
        box-shadow: 0 5px 15px rgba(231, 76, 60, 0.3);
    }

    .item-details {
        display: grid;
        grid-template-columns: 2fr 1fr 1fr;
        gap: 20px;
        align-items: center;
    }

    .item-name {
        font-size: 18px;
        font-weight: bold;
        color: #2c3e50;
        margin-bottom: 5px;
    }

    .item-info {
        color: #7f8c8d;
        font-size: 14px;
    }

    .item-price {
        text-align: center;
        font-size: 16px;
        color: #34495e;
    }

    .item-total {
        text-align: center;
        font-size: 18px;
        font-weight: bold;
        color: #27ae60;
    }

    .price-badge {
        background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
        color: white;
        padding: 5px 12px;
        border-radius: 15px;
        font-size: 14px;
        font-weight: bold;
        display: inline-block;
        margin: 2px 0;
    }

    .total-badge {
        background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
        color: white;
        padding: 8px 15px;
        border-radius: 20px;
        font-size: 16px;
        font-weight: bold;
        display: inline-block;
    }

    .empty-items {
        background: #f8f9fa;
        border: 2px dashed #dee2e6;
        border-radius: 12px;
        padding: 40px;
        text-align: center;
        color: #6c757d;
        font-style: italic;
        margin: 20px 0;
    }

    /* ŸÖŸàÿ®ÿß€åŸÑ - ⁄©ÿßÿ±ÿ™‚ÄåŸáÿß */
    @media (max-width: 768px) {
        .item-details {
            grid-template-columns: 1fr;
            gap: 15px;
            text-align: center;
        }
        
        .item-header {
            flex-direction: column;
            gap: 10px;
        }
        
        .item-name {
            font-size: 16px;
        }
        
        .add-item-form {
            padding: 20px;
        }
        
        .item-card {
            padding: 20px;
        }
        
        input, select {
            font-size: 16px !important;
            padding: 12px !important;
        }
    }

    .btn {
        padding: 12px 25px;
        border: none;
        border-radius: 8px;
        font-size: 14px;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s ease;
        margin: 5px;
    }

    .btn-primary {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
    }

    .btn-secondary {
        background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
        color: white;
    }

    .btn-success {
        background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
        color: white;
    }

    .btn-danger {
        background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
        color: white;
    }

    .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }

    .total-section {
        background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
        color: white;
        padding: 25px;
        border-radius: 12px;
        margin-top: 20px;
    }

    .total-row {
        display: flex;
        justify-content: space-between;
        margin-bottom: 10px;
        padding: 10px 0;
        border-bottom: 1px solid rgba(255,255,255,0.2);
    }

    .total-row:last-child {
        border-bottom: none;
        font-size: 1.2em;
        font-weight: bold;
        color: #f39c12;
    }

    .actions {
        text-align: center;
        margin-top: 30px;
        padding: 20px;
        background: #f8f9fa;
        border-radius: 12px;
    }

    /* ⁄ÜÿßŸæ */
    @media print {
        body {
            background: white;
            padding: 0;
        }
        
        .container {
            box-shadow: none;
            border-radius: 0;
            max-width: none;
        }
        
        .form-container {
            padding: 20px;
        }
        
        .section {
            break-inside: avoid;
            background: white;
            border: 1px solid #ddd;
        }
        
        .actions, .btn {
            display: none;
        }
        
        .items-table {
            font-size: 12px;
        }
        
        .header {
            background: #2c3e50 !important;
            -webkit-print-color-adjust: exact;
            print-color-adjust: exact;
        }
    }

    /* ŸÖŸàÿ®ÿß€åŸÑ */
    @media (max-width: 768px) {
        body {
            padding: 10px;
        }
        
        .form-container {
            padding: 20px;
        }
        
        .form-row {
            grid-template-columns: 1fr;
        }
        
        .items-table {
            font-size: 12px;
        }
        
        .items-table th,
        .items-table td {
            padding: 8px 5px;
        }
        
        .logo {
            font-size: 2em;
        }
        
        .header {
            padding: 20px;
        }
    }

    .preview-section {
        display: none;
        margin-top: 30px;
        padding: 20px;
        background: white;
        border: 2px solid #667eea;
        border-radius: 12px;
    }

    .invoice-preview {
        font-family: 'Tahoma', Arial, sans-serif;
        line-height: 1.6;
    }

    .preview-header {
        text-align: center;
        border-bottom: 3px solid #2c3e50;
        padding-bottom: 20px;
        margin-bottom: 30px;
    }

    .preview-info {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 30px;
        margin-bottom: 30px;
    }

    .info-box {
        padding: 15px;
        border: 1px solid #ddd;
        border-radius: 8px;
        background: #f9f9f9;
    }

    .info-box h4 {
        color: #2c3e50;
        margin-bottom: 10px;
        border-bottom: 2px solid #667eea;
        padding-bottom: 5px;
    }

    /* ÿßŸÜ€åŸÖ€åÿ¥ŸÜ‚ÄåŸáÿß */
    .section {
        animation: fadeInUp 0.6s ease;
    }

    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(30px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .success-message {
        background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
        color: white;
        padding: 15px;
        border-radius: 8px;
        margin: 20px 0;
        text-align: center;
        display: none;
        animation: slideIn 0.5s ease;
    }

    @keyframes slideIn {
        from {
            opacity: 0;
            transform: translateX(-100%);
        }
        to {
            opacity: 1;
            transform: translateX(0);
        }
    }
</style>
```

</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">üé® ÿµŸÜÿß€åÿπ ÿØÿ≥ÿ™€å</div>
            <div class="company-info">
                <input type="text" id="companyName" placeholder="ŸÜÿßŸÖ ÿ¥ÿ±⁄©ÿ™ / ŸÅÿ±Ÿàÿ¥⁄ØÿßŸá" 
                       style="background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.3); color: white; text-align: center; margin: 5px 0;">
                <br>
                <input type="text" id="companyAddress" placeholder="ÿ¢ÿØÿ±ÿ≥" 
                       style="background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.3); color: white; text-align: center; margin: 5px 0;">
                <br>
                <input type="text" id="companyPhone" placeholder="ÿ™ŸÑŸÅŸÜ ÿ™ŸÖÿßÿ≥" 
                       style="background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.3); color: white; text-align: center; margin: 5px 0;">
            </div>
        </div>

```
    <div class="form-container">
        <div class="success-message" id="successMessage">
            ‚úÖ ÿßÿ∑ŸÑÿßÿπÿßÿ™ ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ÿ∞ÿÆ€åÿ±Ÿá ÿ¥ÿØ!
        </div>

        <!-- ÿßÿ∑ŸÑÿßÿπÿßÿ™ ŸÅÿß⁄©ÿ™Ÿàÿ± -->
        <div class="section">
            <h3>üìã ÿßÿ∑ŸÑÿßÿπÿßÿ™ ŸÅÿß⁄©ÿ™Ÿàÿ±</h3>
            <div class="form-row">
                <div class="form-group">
                    <label>ÿ¥ŸÖÿßÿ±Ÿá ŸÅÿß⁄©ÿ™Ÿàÿ±</label>
                    <input type="text" id="invoiceNumber" placeholder="ŸÖÿ´ÿßŸÑ: 1001">
                </div>
                <div class="form-group">
                    <label>ÿ™ÿßÿ±€åÿÆ ŸÅÿß⁄©ÿ™Ÿàÿ±</label>
                    <input type="text" id="invoiceDate" placeholder="1403/05/22">
                </div>
                <div class="form-group">
                    <label>ŸÜŸàÿπ Ÿæÿ±ÿØÿßÿÆÿ™</label>
                    <select id="paymentType">
                        <option value="ŸÜŸÇÿØ€å">ŸÜŸÇÿØ€å</option>
                        <option value="⁄Ü⁄©€å">⁄Ü⁄©€å</option>
                        <option value="ÿßÿπÿ™ÿ®ÿßÿ±€å">ÿßÿπÿ™ÿ®ÿßÿ±€å</option>
                        <option value="⁄©ÿßÿ±ÿ™ ÿ®Ÿá ⁄©ÿßÿ±ÿ™">⁄©ÿßÿ±ÿ™ ÿ®Ÿá ⁄©ÿßÿ±ÿ™</option>
                        <option value="ÿ¢ŸÜŸÑÿß€åŸÜ">Ÿæÿ±ÿØÿßÿÆÿ™ ÿ¢ŸÜŸÑÿß€åŸÜ</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- ÿßÿ∑ŸÑÿßÿπÿßÿ™ ŸÖÿ¥ÿ™ÿ±€å -->
        <div class="section">
            <h3>üë§ ÿßÿ∑ŸÑÿßÿπÿßÿ™ ŸÖÿ¥ÿ™ÿ±€å</h3>
            <div class="form-row">
                <div class="form-group">
                    <label>ŸÜÿßŸÖ Ÿà ŸÜÿßŸÖ ÿÆÿßŸÜŸàÿßÿØ⁄Ø€å</label>
                    <input type="text" id="customerName" placeholder="ŸÜÿßŸÖ ⁄©ÿßŸÖŸÑ ŸÖÿ¥ÿ™ÿ±€å">
                </div>
                <div class="form-group">
                    <label>ÿ¥ŸÖÿßÿ±Ÿá ÿ™ŸÖÿßÿ≥</label>
                    <input type="tel" id="customerPhone" placeholder="09123456789">
                </div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label>ÿ¢ÿØÿ±ÿ≥</label>
                    <textarea id="customerAddress" rows="3" placeholder="ÿ¢ÿØÿ±ÿ≥ ⁄©ÿßŸÖŸÑ ŸÖÿ¥ÿ™ÿ±€å"></textarea>
                </div>
                <div class="form-group">
                    <label>⁄©ÿØ ŸÖŸÑ€å (ÿßÿÆÿ™€åÿßÿ±€å)</label>
                    <input type="text" id="customerNationalId" placeholder="1234567890">
                </div>
            </div>
        </div>

        <!-- ⁄©ÿßŸÑÿßŸáÿß Ÿà ÿÆÿØŸÖÿßÿ™ -->
        <div class="section">
            <h3>üì¶ ⁄©ÿßŸÑÿßŸáÿß Ÿà ÿÆÿØŸÖÿßÿ™</h3>
            
            <!-- ŸÅÿ±ŸÖ ÿßÿ∂ÿßŸÅŸá ⁄©ÿ±ÿØŸÜ ⁄©ÿßŸÑÿß€å ÿ¨ÿØ€åÿØ -->
            <div class="add-item-form">
                <h4 style="color: #2c3e50; margin-bottom: 20px; font-size: 1.1em;">‚ûï ÿßŸÅÿ≤ŸàÿØŸÜ ⁄©ÿßŸÑÿß€å ÿ¨ÿØ€åÿØ</h4>
                <div class="item-card">
                    <div class="form-row">
                        <div class="form-group">
                            <label>ÿ¥ÿ±ÿ≠ ⁄©ÿßŸÑÿß *</label>
                            <input type="text" id="newItemName" placeholder="ŸÖÿ´ÿßŸÑ: ⁄ØŸÑÿØÿßŸÜ ÿ≥ŸÅÿßŸÑ€å ÿØÿ≥ÿ™ ÿ≥ÿßÿ≤" style="font-size: 16px; padding: 15px;">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>ÿ™ÿπÿØÿßÿØ</label>
                            <input type="number" id="newItemQuantity" value="1" min="1" style="font-size: 18px; padding: 15px; text-align: center;">
                        </div>
                        <div class="form-group">
                            <label>Ÿàÿßÿ≠ÿØ</label>
                            <select id="newItemUnit" style="font-size: 16px; padding: 15px;">
                                <option value="ÿπÿØÿØ">ÿπÿØÿØ</option>
                                <option value="ÿØÿ≥ÿ™">ÿØÿ≥ÿ™</option>
                                <option value="ÿ¨ŸÅÿ™">ÿ¨ŸÅÿ™</option>
                                <option value="⁄©€åŸÑŸà⁄Øÿ±ŸÖ">⁄©€åŸÑŸà⁄Øÿ±ŸÖ</option>
                                <option value="ŸÖÿ™ÿ±">ŸÖÿ™ÿ±</option>
                                <option value="ÿ®ÿ≥ÿ™Ÿá">ÿ®ÿ≥ÿ™Ÿá</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>ŸÇ€åŸÖÿ™ Ÿàÿßÿ≠ÿØ (ÿ±€åÿßŸÑ) *</label>
                            <input type="number" id="newItemPrice" placeholder="500000" style="font-size: 18px; padding: 15px; text-align: center;">
                        </div>
                        <div class="form-group">
                            <label>ÿ™ÿÆŸÅ€åŸÅ (%)</label>
                            <input type="number" id="newItemDiscount" value="0" min="0" max="100" style="font-size: 18px; padding: 15px; text-align: center;">
                        </div>
                    </div>
                    <div class="form-row" style="justify-content: center; margin-top: 20px;">
                        <button class="btn btn-success" onclick="addNewItem()" style="font-size: 16px; padding: 15px 30px;">
                            ‚úÖ ÿ´ÿ®ÿ™ ⁄©ÿßŸÑÿß
                        </button>
                    </div>
                </div>
            </div>

            <!-- ŸÑ€åÿ≥ÿ™ ⁄©ÿßŸÑÿßŸáÿß€å ÿßÿ∂ÿßŸÅŸá ÿ¥ÿØŸá -->
            <div class="items-list" id="itemsList">
                <h4 style="color: #2c3e50; margin: 30px 0 20px 0; font-size: 1.1em;">üìã ⁄©ÿßŸÑÿßŸáÿß€å ÿ´ÿ®ÿ™ ÿ¥ÿØŸá</h4>
                <div class="empty-items" id="emptyItems" style="text-align: center; padding: 40px; color: #7f8c8d; font-style: italic;">
                    ŸáŸÜŸàÿ≤ ⁄©ÿßŸÑÿß€å€å ÿßÿ∂ÿßŸÅŸá ŸÜÿ¥ÿØŸá ÿßÿ≥ÿ™
                </div>
            </div>
        </div>

        <!-- ÿ¨ŸÖÿπ ⁄©ŸÑ -->
        <div class="total-section">
            <div class="total-row">
                <span>ÿ¨ŸÖÿπ ⁄©ŸÑ (ÿ®ÿØŸàŸÜ ÿ™ÿÆŸÅ€åŸÅ):</span>
                <span id="subtotal">0 ÿ±€åÿßŸÑ</span>
            </div>
            <div class="total-row">
                <span>ŸÖÿ¨ŸÖŸàÿπ ÿ™ÿÆŸÅ€åŸÅ:</span>
                <span id="totalDiscount">0 ÿ±€åÿßŸÑ</span>
            </div>
            <div class="total-row">
                <span>ŸÖÿßŸÑ€åÿßÿ™ ÿ®ÿ± ÿßÿ±ÿ≤ÿ¥ ÿßŸÅÿ≤ŸàÿØŸá (9%):</span>
                <span id="tax">0 ÿ±€åÿßŸÑ</span>
            </div>
            <div class="total-row">
                <span>ŸÖÿ®ŸÑÿ∫ ŸÇÿßÿ®ŸÑ Ÿæÿ±ÿØÿßÿÆÿ™:</span>
                <span id="finalTotal">0 ÿ±€åÿßŸÑ</span>
            </div>
        </div>

        <!-- €åÿßÿØÿØÿßÿ¥ÿ™ -->
        <div class="section">
            <h3>üìù €åÿßÿØÿØÿßÿ¥ÿ™</h3>
            <textarea id="notes" rows="4" placeholder="€åÿßÿØÿØÿßÿ¥ÿ™ Ÿáÿß€å ÿßÿ∂ÿßŸÅ€åÿå ÿ™Ÿàÿ∂€åÿ≠ÿßÿ™ Ÿà€å⁄òŸáÿå ÿ¥ÿ±ÿß€åÿ∑ ŸÅÿ±Ÿàÿ¥ Ÿà ..."></textarea>
        </div>

        <!-- ÿØ⁄©ŸÖŸá‚ÄåŸáÿß€å ÿπŸÖŸÑ€åÿßÿ™ -->
        <div class="actions">
            <button class="btn btn-success" onclick="generatePreview()">üëÅÔ∏è ŸÖÿ¥ÿßŸáÿØŸá Ÿæ€åÿ¥‚ÄåŸÜŸÖÿß€åÿ¥</button>
            <button class="btn btn-primary" onclick="printInvoice()">üñ®Ô∏è ⁄ÜÿßŸæ ŸÅÿß⁄©ÿ™Ÿàÿ±</button>
            <button class="btn btn-secondary" onclick="downloadPDF()">üì• ÿØÿßŸÜŸÑŸàÿØ PDF</button>
            <button class="btn btn-primary" onclick="saveData()">üíæ ÿ∞ÿÆ€åÿ±Ÿá ÿßÿ∑ŸÑÿßÿπÿßÿ™</button>
            <button class="btn btn-danger" onclick="clearAll()">üóëÔ∏è Ÿæÿß⁄© ⁄©ÿ±ÿØŸÜ ŸáŸÖŸá</button>
        </div>

        <!-- Ÿæ€åÿ¥‚ÄåŸÜŸÖÿß€åÿ¥ ŸÅÿß⁄©ÿ™Ÿàÿ± -->
        <div class="preview-section" id="previewSection">
            <div class="invoice-preview" id="invoicePreview">
                <!-- ŸÖÿ≠ÿ™Ÿàÿß€å Ÿæ€åÿ¥‚ÄåŸÜŸÖÿß€åÿ¥ ÿß€åŸÜÿ¨ÿß ŸÇÿ±ÿßÿ± ŸÖ€å‚Äå⁄Ø€åÿ±ÿØ -->
            </div>
        </div>
    </div>
</div>

<script>
    // ŸÖÿ™ÿ∫€åÿ±Ÿáÿß€å ÿ≥ÿ±ÿßÿ≥ÿ±€å
    let invoiceData = {};
    let itemsArray = [];
    
    // ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ÿßÿ∑ŸÑÿßÿπÿßÿ™ ÿ∞ÿÆ€åÿ±Ÿá ÿ¥ÿØŸá
    window.onload = function() {
        loadSavedData();
        calculateTotals();
        setCurrentDate();
        updateItemsDisplay();
    };

    // ÿ™ŸÜÿ∏€åŸÖ ÿ™ÿßÿ±€åÿÆ ŸÅÿπŸÑ€å
    function setCurrentDate() {
        const today = new Date();
        const shamsiDate = today.toLocaleDateString('fa-IR');
        document.getElementById('invoiceDate').value = shamsiDate;
    }

    // ÿßÿ∂ÿßŸÅŸá ⁄©ÿ±ÿØŸÜ ⁄©ÿßŸÑÿß€å ÿ¨ÿØ€åÿØ
    function addNewItem() {
        const name = document.getElementById('newItemName').value.trim();
        const quantity = parseInt(document.getElementById('newItemQuantity').value) || 1;
        const unit = document.getElementById('newItemUnit').value;
        const price = parseFloat(document.getElementById('newItemPrice').value) || 0;
        const discount = parseFloat(document.getElementById('newItemDiscount').value) || 0;
        
        if (!name) {
            alert('ŸÑÿ∑ŸÅÿß ÿ¥ÿ±ÿ≠ ⁄©ÿßŸÑÿß ÿ±ÿß Ÿàÿßÿ±ÿØ ⁄©ŸÜ€åÿØ');
            document.getElementById('newItemName').focus();
            return;
        }
        
        if (price <= 0) {
            alert('ŸÑÿ∑ŸÅÿß ŸÇ€åŸÖÿ™ ŸÖÿπÿ™ÿ®ÿ± Ÿàÿßÿ±ÿØ ⁄©ŸÜ€åÿØ');
            document.getElementById('newItemPrice').focus();
            return;
        }
        
        const item = {
            id: Date.now(),
            name: name,
            quantity: quantity,
            unit: unit,
            price: price,
            discount: discount
        };
        
        itemsArray.push(item);
        
        // Ÿæÿß⁄© ⁄©ÿ±ÿØŸÜ ŸÅÿ±ŸÖ
        document.getElementById('newItemName').value = '';
        document.getElementById('newItemQuantity').value = '1';
        document.getElementById('newItemUnit').selectedIndex = 0;
        document.getElementById('newItemPrice').value = '';
        document.getElementById('newItemDiscount').value = '0';
        
        updateItemsDisplay();
        calculateTotals();
        showSuccessMessage('⁄©ÿßŸÑÿß ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ÿßÿ∂ÿßŸÅŸá ÿ¥ÿØ');
        
        // ŸÅŸà⁄©ÿ≥ ÿ±Ÿà€å ŸÜÿßŸÖ ⁄©ÿßŸÑÿß€å ÿ®ÿπÿØ€å
        document.getElementById('newItemName').focus();
    }

    // ÿ®Ÿá‚Äåÿ±Ÿàÿ≤ÿ±ÿ≥ÿßŸÜ€å ŸÜŸÖÿß€åÿ¥ ⁄©ÿßŸÑÿßŸáÿß
    function updateItemsDisplay() {
        const itemsList = document.getElementById('itemsList');
        const emptyItems = document.getElementById('emptyItems');
        
        if (itemsArray.length === 0) {
            emptyItems.style.display = 'block';
            // ÿ≠ÿ∞ŸÅ ÿ™ŸÖÿßŸÖ ⁄©ÿßŸÑÿßŸáÿß€å ŸÜŸÖÿß€åÿ¥ ÿØÿßÿØŸá ÿ¥ÿØŸá
            const existingItems = itemsList.querySelectorAll('.added-item');
            existingItems.forEach(item => item.remove());
            return;
        }
        
        emptyItems.style.display = 'none';
        
        // ÿ≠ÿ∞ŸÅ ⁄©ÿßŸÑÿßŸáÿß€å ŸÇÿ®ŸÑ€å
        const existingItems = itemsList.querySelectorAll('.added-item');
        existingItems.forEach(item => item.remove());
        
        // ÿßÿ∂ÿßŸÅŸá ⁄©ÿ±ÿØŸÜ ⁄©ÿßŸÑÿßŸáÿß€å ÿ¨ÿØ€åÿØ
        itemsArray.forEach((item, index) => {
            const lineTotal = item.quantity * item.price;
            const discountAmount = (lineTotal * item.discount) / 100;
            const finalTotal = lineTotal - discountAmount;
            
            const itemElement = document.createElement('div');
            itemElement.className = 'added-item';
            itemElement.innerHTML = `
                <div class="item-header">
                    <div class="item-number">ÿ±ÿØ€åŸÅ ${index + 1}</div>
                    <button class="item-remove" onclick="removeItem(${item.id})">üóëÔ∏è ÿ≠ÿ∞ŸÅ</button>
                </div>
                <div class="item-details">
                    <div>
                        <div class="item-name">${item.name}</div>
                        <div class="item-info">${item.quantity} ${item.unit}</div>
                        ${item.discount > 0 ? `<div class="item-info">ÿ™ÿÆŸÅ€åŸÅ: ${item.discount}%</div>` : ''}
                    </div>
                    <div class="item-price">
                        <div class="price-badge">${item.price.toLocaleString('fa-IR')} ÿ±€åÿßŸÑ</div>
                        <div style="font-size: 12px; color: #7f8c8d; margin-top: 5px;">ŸÇ€åŸÖÿ™ Ÿàÿßÿ≠ÿØ</div>
                    </div>
                    <div class="item-total">
                        <div class="total-badge">${finalTotal.toLocaleString('fa-IR')} ÿ±€åÿßŸÑ</div>
                        <div style="font-size: 12px; color: #7f8c8d; margin-top: 5px;">ŸÖÿ®ŸÑÿ∫ ⁄©ŸÑ</div>
                    </div>
                </div>
            `;
            itemsList.appendChild(itemElement);
        });
    }

    // ÿ≠ÿ∞ŸÅ ⁄©ÿßŸÑÿß
    function removeItem(itemId) {
        if (confirm('ÿ¢€åÿß ŸÖÿ∑ŸÖÿ¶ŸÜ Ÿáÿ≥ÿ™€åÿØ ⁄©Ÿá ŸÖ€å‚ÄåÿÆŸàÿßŸá€åÿØ ÿß€åŸÜ ⁄©ÿßŸÑÿß ÿ±ÿß ÿ≠ÿ∞ŸÅ ⁄©ŸÜ€åÿØÿü')) {
            itemsArray = itemsArray.filter(item => item.id !== itemId);
            updateItemsDisplay();
            calculateTotals();
            showSuccessMessage('⁄©ÿßŸÑÿß ÿ≠ÿ∞ŸÅ ÿ¥ÿØ');
        }
    }

    // ŸÖÿ≠ÿßÿ≥ÿ®Ÿá ŸÖÿ¨ŸÖŸàÿπ
    function calculateTotals() {
        let subtotal = 0;
        let totalDiscountAmount = 0;

        itemsArray.forEach(item => {
            const lineTotal = item.quantity * item.price;
            const discountAmount = (lineTotal * item.discount) / 100;
            
            subtotal += lineTotal;
            totalDiscountAmount += discountAmount;
        });

        const afterDiscount = subtotal - totalDiscountAmount;
        const tax = afterDiscount * 0.09;
        const finalTotal = afterDiscount + tax;

        document.getElementById('subtotal').textContent = subtotal.toLocaleString('fa-IR') + ' ÿ±€åÿßŸÑ';
        document.getElementById('totalDiscount').textContent = totalDiscountAmount.toLocaleString('fa-IR') + ' ÿ±€åÿßŸÑ';
        document.getElementById('tax').textContent = tax.toLocaleString('fa-IR') + ' ÿ±€åÿßŸÑ';
        document.getElementById('finalTotal').textContent = finalTotal.toLocaleString('fa-IR') + ' ÿ±€åÿßŸÑ';
    }

    // ŸÅŸÇÿ∑ ÿ®ÿ±ÿß€å ÿ≥ÿßÿ≤⁄Øÿßÿ±€å ÿ®ÿß ⁄©ÿØŸáÿß€å ŸÇÿØ€åŸÖ€å
    function addRow() {
        document.getElementById('newItemName').focus();
    }

    function removeRow(btn) {
        // ÿß€åŸÜ ÿ™ÿßÿ®ÿπ ÿØ€å⁄Øÿ± ÿßÿ≥ÿ™ŸÅÿßÿØŸá ŸÜŸÖ€å‚Äåÿ¥ŸàÿØ
    }

    function updateRowNumbers() {
        // ÿß€åŸÜ ÿ™ÿßÿ®ÿπ ÿØ€å⁄Øÿ± ÿßÿ≥ÿ™ŸÅÿßÿØŸá ŸÜŸÖ€å‚Äåÿ¥ŸàÿØ
    }

    // ÿ™ŸàŸÑ€åÿØ Ÿæ€åÿ¥‚ÄåŸÜŸÖÿß€åÿ¥
    function generatePreview() {
        const previewSection = document.getElementById('previewSection');
        const preview = document.getElementById('invoicePreview');
        
        // ÿ¨ŸÖÿπ‚Äåÿ¢Ÿàÿ±€å ÿßÿ∑ŸÑÿßÿπÿßÿ™
        const companyName = document.getElementById('companyName').value || 'ŸÜÿßŸÖ ÿ¥ÿ±⁄©ÿ™';
        const companyAddress = document.getElementById('companyAddress').value || 'ÿ¢ÿØÿ±ÿ≥ ÿ¥ÿ±⁄©ÿ™';
        const companyPhone = document.getElementById('companyPhone').value || 'ÿ¥ŸÖÿßÿ±Ÿá ÿ™ŸÖÿßÿ≥';
        
        const invoiceNumber = document.getElementById('invoiceNumber').value || 'ÿ¥ŸÖÿßÿ±Ÿá ŸÅÿß⁄©ÿ™Ÿàÿ±';
        const invoiceDate = document.getElementById('invoiceDate').value || 'ÿ™ÿßÿ±€åÿÆ';
        const paymentType = document.getElementById('paymentType').value;
        
        const customerName = document.getElementById('customerName').value || 'ŸÜÿßŸÖ ŸÖÿ¥ÿ™ÿ±€å';
        const customerPhone = document.getElementById('customerPhone').value || 'ÿ¥ŸÖÿßÿ±Ÿá ŸÖÿ¥ÿ™ÿ±€å';
        const customerAddress = document.getElementById('customerAddress').value || 'ÿ¢ÿØÿ±ÿ≥ ŸÖÿ¥ÿ™ÿ±€å';
        
        // ÿ™ŸàŸÑ€åÿØ HTML Ÿæ€åÿ¥‚ÄåŸÜŸÖÿß€åÿ¥
        let itemsHTML = '';
        const table = document.getElementById('itemsTable').getElementsByTagName('tbody')[0];
        
        for (let i = 0; i < table.rows.length; i++) {
            const row = table.rows[i];
            const description = row.cells[1].querySelector('input').value || '';
            const quantity = row.cells[2].querySelector('input').value || '0';
            const unit = row.cells[3].querySelector('select').value;
            const price = row.cells[4].querySelector('input').value || '0';
            const discount = row.cells[5].querySelector('input').value || '0';
            const total = row.cells[6].textContent;
            
            if (description) {
                itemsHTML += `
                    <tr>
                        <td>${i + 1}</td>
                        <td>${description}</td>
                        <td>${quantity}</td>
                        <td>${unit}</td>
                        <td>${parseFloat(price).toLocaleString('fa-IR')}</td>
                        <td>${discount}%</td>
                        <td>${total}</td>
                    </tr>
                `;
            }
        }
        
        preview.innerHTML = `
            <div class="preview-header">
                <h1>üé® ${companyName}</h1>
                <p>${companyAddress}</p>
                <p>ÿ™ŸÑŸÅŸÜ: ${companyPhone}</p>
                <hr style="margin: 20px 0;">
                <h2>ŸÅÿß⁄©ÿ™Ÿàÿ± ŸÅÿ±Ÿàÿ¥</h2>
            </div>
            
            <div class="preview-info">
                <div class="info-box">
                    <h4>ÿßÿ∑ŸÑÿßÿπÿßÿ™ ŸÅÿß⁄©ÿ™Ÿàÿ±</h4>
                    <p><strong>ÿ¥ŸÖÿßÿ±Ÿá ŸÅÿß⁄©ÿ™Ÿàÿ±:</strong> ${invoiceNumber}</p>
                    <p><strong>ÿ™ÿßÿ±€åÿÆ:</strong> ${invoiceDate}</p>
                    <p><strong>ŸÜŸàÿπ Ÿæÿ±ÿØÿßÿÆÿ™:</strong> ${paymentType}</p>
                </div>
                <div class="info-box">
                    <h4>ÿßÿ∑ŸÑÿßÿπÿßÿ™ ŸÖÿ¥ÿ™ÿ±€å</h4>
                    <p><strong>ŸÜÿßŸÖ:</strong> ${customerName}</p>
                    <p><strong>ÿ™ŸÑŸÅŸÜ:</strong> ${customerPhone}</p>
                    <p><strong>ÿ¢ÿØÿ±ÿ≥:</strong> ${customerAddress}</p>
                </div>
            </div>
            
            <table class="items-table" style="margin: 20px 0;">
                <thead>
                    <tr>
                        <th>ÿ±ÿØ€åŸÅ</th>
                        <th>ÿ¥ÿ±ÿ≠ ⁄©ÿßŸÑÿß</th>
                        <th>ÿ™ÿπÿØÿßÿØ</th>
                        <th>Ÿàÿßÿ≠ÿØ</th>
                        <th>ŸÇ€åŸÖÿ™ Ÿàÿßÿ≠ÿØ</th>
                        <th>ÿ™ÿÆŸÅ€åŸÅ</th>
                        <th>ŸÖÿ®ŸÑÿ∫ ⁄©ŸÑ</th>
                    </tr>
                </thead>
                <tbody>
                    ${itemsHTML}
                </tbody>
            </table>
            
            <div class="total-section">
                <div class="total-row">
                    <span>ÿ¨ŸÖÿπ ⁄©ŸÑ (ÿ®ÿØŸàŸÜ ÿ™ÿÆŸÅ€åŸÅ):</span>
                    <span>${document.getElementById('subtotal').textContent}</span>
                </div>
                <div class="total-row">
                    <span>ŸÖÿ¨ŸÖŸàÿπ ÿ™ÿÆŸÅ€åŸÅ:</span>
                    <span>${document.getElementById('totalDiscount').textContent}</span>
                </div>
                <div class="total-row">
                    <span>ŸÖÿßŸÑ€åÿßÿ™ ÿ®ÿ± ÿßÿ±ÿ≤ÿ¥ ÿßŸÅÿ≤ŸàÿØŸá (9%):</span>
                    <span>${document.getElementById('tax').textContent}</span>
                </div>
                <div class="total-row">
                    <span>ŸÖÿ®ŸÑÿ∫ ŸÇÿßÿ®ŸÑ Ÿæÿ±ÿØÿßÿÆÿ™:</span>
                    <span>${document.getElementById('finalTotal').textContent}</span>
                </div>
            </div>
            
            ${document.getElementById('notes').value ? `
            <div style="margin-top: 20px; padding: 15px; background: #f9f9f9; border-radius: 8px;">
                <h4>€åÿßÿØÿØÿßÿ¥ÿ™:</h4>
                <p>${document.getElementById('notes').value}</p>
            </div>
            ` : ''}
        `;
        
        previewSection.style.display = 'block';
        previewSection.scrollIntoView({ behavior: 'smooth' });
        showSuccessMessage('Ÿæ€åÿ¥‚ÄåŸÜŸÖÿß€åÿ¥ ÿ™ŸàŸÑ€åÿØ ÿ¥ÿØ');
    }

    // ⁄ÜÿßŸæ ŸÅÿß⁄©ÿ™Ÿàÿ±
    function printInvoice() {
        generatePreview();
        setTimeout(() => {
            window.print();
        }, 500);
    }

    // ÿØÿßŸÜŸÑŸàÿØ PDF (ÿ¥ÿ®€åŸá‚Äåÿ≥ÿßÿ≤€å)
    function downloadPDF() {
        generatePreview();
        
        // ÿ¥ÿ®€åŸá‚Äåÿ≥ÿßÿ≤€å ÿØÿßŸÜŸÑŸàÿØ PDF
        showSuccessMessage('ÿØÿ± ÿ≠ÿßŸÑ ÿ¢ŸÖÿßÿØŸá‚Äåÿ≥ÿßÿ≤€å ŸÅÿß€åŸÑ PDF...');
        
        setTimeout(() => {
            // ÿß€åÿ¨ÿßÿØ ŸÖÿ≠ÿ™Ÿàÿß€å HTML ÿ®ÿ±ÿß€å ÿØÿßŸÜŸÑŸàÿØ
            const content = document.getElementById('invoicePreview').innerHTML;
            const htmlContent = `
                <!DOCTYPE html>
                <html lang="fa" dir="rtl">
                <head>
                    <meta charset="UTF-8">
                    <title>ŸÅÿß⁄©ÿ™Ÿàÿ± ${document.getElementById('invoiceNumber').value || 'ÿ¨ÿØ€åÿØ'}</title>
                    <style>
                        body { font-family: Tahoma, Arial, sans-serif; margin: 20px; line-height: 1.6; }
                        .preview-header { text-align: center; border-bottom: 3px solid #2c3e50; padding-bottom: 20px; margin-bottom: 30px; }
                        .preview-info { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px; }
                        .info-box { padding: 15px; border: 1px solid #ddd; border-radius: 8px; background: #f9f9f9; }
                        .info-box h4 { color: #2c3e50; margin-bottom: 10px; border-bottom: 2px solid #667eea; padding-bottom: 5px; }
                        .items-table { width: 100%; border-collapse: collapse; margin: 20px 0; }
                        .items-table th { background: #2c3e50; color: white; padding: 12px; text-align: center; }
                        .items-table td { padding: 10px; text-align: center; border: 1px solid #ddd; }
                        .total-section { background: #f8f9fa; padding: 20px; border-radius: 8px; margin-top: 20px; }
                        .total-row { display: flex; justify-content: space-between; margin-bottom: 10px; padding: 5px 0; }
                    </style>
                </head>
                <body>${content}</body>
                </html>
            `;
            
            const blob = new Blob([htmlContent], { type: 'text/html;charset=utf-8' });
            const url = window.URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `ŸÅÿß⁄©ÿ™Ÿàÿ±_${document.getElementById('invoiceNumber').value || 'ÿ¨ÿØ€åÿØ'}.html`;
            link.click();
            window.URL.revokeObjectURL(url);
            
            showSuccessMessage('ŸÅÿß€åŸÑ ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ÿØÿßŸÜŸÑŸàÿØ ÿ¥ÿØ! (ŸÅÿ±ŸÖÿ™ HTML)');
        }, 1000);
    }

    // ÿ∞ÿÆ€åÿ±Ÿá ÿßÿ∑ŸÑÿßÿπÿßÿ™
    function saveData() {
        const data = {
            companyName: document.getElementById('companyName').value,
            companyAddress: document.getElementById('companyAddress').value,
            companyPhone: document.getElementById('companyPhone').value,
            invoiceNumber: document.getElementById('invoiceNumber').value,
            invoiceDate: document.getElementById('invoiceDate').value,
            paymentType: document.getElementById('paymentType').value,
            customerName: document.getElementById('customerName').value,
            customerPhone: document.getElementById('customerPhone').value,
            customerAddress: document.getElementById('customerAddress').value,
            customerNationalId: document.getElementById('customerNationalId').value,
            notes: document.getElementById('notes').value,
            items: []
        };
        
        // ÿ∞ÿÆ€åÿ±Ÿá ÿßŸÇŸÑÿßŸÖ
        const table = document.getElementById('itemsTable').getElementsByTagName('tbody')[0];
        for (let i = 0; i < table.rows.length; i++) {
            const row = table.rows[i];
            const item = {
                description: row.cells[1].querySelector('input').value,
                quantity: row.cells[2].querySelector('input').value,
                unit: row.cells[3].querySelector('select').value,
                price: row.cells[4].querySelector('input').value,
                discount: row.cells[5].querySelector('input').value
            };
            data.items.push(item);
        }
        
        // ÿ∞ÿÆ€åÿ±Ÿá ÿØÿ± ÿ≠ÿßŸÅÿ∏Ÿá ŸÖÿ≠ŸÑ€å ŸÖÿ™ÿ∫€åÿ±
        invoiceData = data;
        showSuccessMessage('ÿßÿ∑ŸÑÿßÿπÿßÿ™ ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ÿ∞ÿÆ€åÿ±Ÿá ÿ¥ÿØ');
    }

    // ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ÿßÿ∑ŸÑÿßÿπÿßÿ™ ÿ∞ÿÆ€åÿ±Ÿá ÿ¥ÿØŸá
    function loadSavedData() {
        if (Object.keys(invoiceData).length === 0) return;
        
        const data = invoiceData;
        
        document.getElementById('companyName').value = data.companyName || '';
        document.getElementById('companyAddress').value = data.companyAddress || '';
        document.getElementById('companyPhone').value = data.companyPhone || '';
        document.getElementById('invoiceNumber').value = data.invoiceNumber || '';
        document.getElementById('invoiceDate').value = data.invoiceDate || '';
        document.getElementById('paymentType').value = data.paymentType || 'ŸÜŸÇÿØ€å';
        document.getElementById('customerName').value = data.customerName || '';
        document.getElementById('customerPhone').value = data.customerPhone || '';
        document.getElementById('customerAddress').value = data.customerAddress || '';
        document.getElementById('customerNationalId').value = data.customerNationalId || '';
        document.getElementById('notes').value = data.notes || '';
        
        // ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ÿßŸÇŸÑÿßŸÖ
        if (data.items && data.items.length > 0) {
            const tbody = document.getElementById('itemsTable').getElementsByTagName('tbody')[0];
            tbody.innerHTML = ''; // Ÿæÿß⁄© ⁄©ÿ±ÿØŸÜ ÿ±ÿØ€åŸÅ‚ÄåŸáÿß€å ŸÖŸàÿ¨ŸàÿØ
            
            data.items.forEach((item, index) => {
                const row = tbody.insertRow();
                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td><input type="text" value="${item.description || ''}" placeholder="ÿ¥ÿ±ÿ≠ ⁄©ÿßŸÑÿß"></td>
                    <td><input type="number" value="${item.quantity || 1}" min="1" class="quantity" onchange="calculateTotals()"></td>
                    <td>
                        <select class="unit">
                            <option value="ÿπÿØÿØ" ${item.unit === 'ÿπÿØÿØ' ? 'selected' : ''}>ÿπÿØÿØ</option>
                            <option value="ÿØÿ≥ÿ™" ${item.unit === 'ÿØÿ≥ÿ™' ? 'selected' : ''}>ÿØÿ≥ÿ™</option>
                            <option value="ÿ¨ŸÅÿ™" ${item.unit === 'ÿ¨ŸÅÿ™' ? 'selected' : ''}>ÿ¨ŸÅÿ™</option>
                            <option value="⁄©€åŸÑŸà⁄Øÿ±ŸÖ" ${item.unit === '⁄©€åŸÑŸà⁄Øÿ±ŸÖ' ? 'selected' : ''}>⁄©€åŸÑŸà⁄Øÿ±ŸÖ</option>
                            <option value="ŸÖÿ™ÿ±" ${item.unit === 'ŸÖÿ™ÿ±' ? 'selected' : ''}>ŸÖÿ™ÿ±</option>
                            <option value="ÿ®ÿ≥ÿ™Ÿá" ${item.unit === 'ÿ®ÿ≥ÿ™Ÿá' ? 'selected' : ''}>ÿ®ÿ≥ÿ™Ÿá</option>
                        </select>
                    </td>
                    <td><input type="number" value="${item.price || ''}" placeholder="ŸÇ€åŸÖÿ™" class="price" onchange="calculateTotals()"></td>
                    <td><input type="number" value="${item.discount || 0}" min="0" max="100" class="discount" onchange="calculateTotals()"></td>
                    <td class="total">0</td>
                    <td><button class="btn btn-danger" onclick="removeRow(this)">ÿ≠ÿ∞ŸÅ</button></td>
                `;
            });
            
            calculateTotals();
        }
    }

    // Ÿæÿß⁄© ⁄©ÿ±ÿØŸÜ ŸáŸÖŸá ÿßÿ∑ŸÑÿßÿπÿßÿ™
    function clearAll() {
        if (confirm('ÿ¢€åÿß ŸÖÿ∑ŸÖÿ¶ŸÜ Ÿáÿ≥ÿ™€åÿØ ⁄©Ÿá ŸÖ€å‚ÄåÿÆŸàÿßŸá€åÿØ ŸáŸÖŸá ÿßÿ∑ŸÑÿßÿπÿßÿ™ Ÿæÿß⁄© ÿ¥ŸàÿØÿü')) {
            // Ÿæÿß⁄© ⁄©ÿ±ÿØŸÜ ŸÅÿ±ŸÖ
            document.querySelectorAll('input, textarea, select').forEach(element => {
                if (element.type === 'number') {
                    element.value = element.classList.contains('quantity') ? '1' : 
                                  element.classList.contains('discount') ? '0' : '';
                } else if (element.tagName === 'SELECT') {
                    element.selectedIndex = 0;
                } else {
                    element.value = '';
                }
            });
            
            // ÿ®ÿßÿ≤ŸÜÿ¥ÿßŸÜ€å ÿ¨ÿØŸàŸÑ ÿ®Ÿá €å⁄© ÿ±ÿØ€åŸÅ
            const tbody = document.getElementById('itemsTable').getElementsByTagName('tbody')[0];
            tbody.innerHTML = `
                <tr>
                    <td>1</td>
                    <td><input type="text" placeholder="ŸÖÿ´ÿßŸÑ: ⁄ØŸÑÿØÿßŸÜ ÿ≥ŸÅÿßŸÑ€å ÿØÿ≥ÿ™ ÿ≥ÿßÿ≤"></td>
                    <td><input type="number" value="1" min="1" class="quantity" onchange="calculateTotals()"></td>
                    <td>
                        <select class="unit">
                            <option value="ÿπÿØÿØ">ÿπÿØÿØ</option>
                            <option value="ÿØÿ≥ÿ™">ÿØÿ≥ÿ™</option>
                            <option value="ÿ¨ŸÅÿ™">ÿ¨ŸÅÿ™</option>
                            <option value="⁄©€åŸÑŸà⁄Øÿ±ŸÖ">⁄©€åŸÑŸà⁄Øÿ±ŸÖ</option>
                            <option value="ŸÖÿ™ÿ±">ŸÖÿ™ÿ±</option>
                            <option value="ÿ®ÿ≥ÿ™Ÿá">ÿ®ÿ≥ÿ™Ÿá</option>
                        </select>
                    </td>
                    <td><input type="number" placeholder="500000" class="price" onchange="calculateTotals()"></td>
                    <td><input type="number" value="0" min="0" max="100" class="discount" onchange="calculateTotals()"></td>
                    <td class="total">0</td>
                    <td><button class="btn btn-danger" onclick="removeRow(this)">ÿ≠ÿ∞ŸÅ</button></td>
                </tr>
            `;
            
            // Ÿæÿß⁄© ⁄©ÿ±ÿØŸÜ Ÿæ€åÿ¥‚ÄåŸÜŸÖÿß€åÿ¥
            document.getElementById('previewSection').style.display = 'none';
            
            // ÿ®ÿßÿ≤ŸÜÿ¥ÿßŸÜ€å ÿØÿßÿØŸá‚ÄåŸáÿß
            invoiceData = {};
            
            // ÿ™ŸÜÿ∏€åŸÖ ŸÖÿ¨ÿØÿØ ÿ™ÿßÿ±€åÿÆ
            setCurrentDate();
            
            calculateTotals();
            showSuccessMessage('ŸáŸÖŸá ÿßÿ∑ŸÑÿßÿπÿßÿ™ Ÿæÿß⁄© ÿ¥ÿØ');
        }
    }

    // ŸÜŸÖÿß€åÿ¥ Ÿæ€åÿßŸÖ ŸÖŸàŸÅŸÇ€åÿ™
    function showSuccessMessage(message) {
        const messageDiv = document.getElementById('successMessage');
        messageDiv.textContent = message;
        messageDiv.style.display = 'block';
        
        setTimeout(() => {
            messageDiv.style.display = 'none';
        }, 3000);
    }

    // ⁄©ŸÑ€åÿØŸáÿß€å ŸÖ€åÿßŸÜÿ®ÿ±
    document.addEventListener('keydown', function(e) {
        if (e.ctrlKey || e.metaKey) {
            switch(e.key) {
                case 's':
                    e.preventDefault();
                    saveData();
                    break;
                case 'p':
                    e.preventDefault();
                    printInvoice();
                    break;
                case 'n':
                    e.preventDefault();
                    addRow();
                    break;
            }
        }
    });

    // ÿßÿ™Ÿà ⁄©ÿßŸÖŸæŸÑ€åÿ™ ÿ®ÿ±ÿß€å ⁄©ÿßŸÑÿßŸáÿß€å ÿµŸÜÿß€åÿπ ÿØÿ≥ÿ™€å
    const handicraftItems = [
        '⁄ØŸÑÿØÿßŸÜ ÿ≥ŸÅÿßŸÑ€å ÿØÿ≥ÿ™ ÿ≥ÿßÿ≤',
        'ÿ®ÿ¥ŸÇÿßÿ® ŸÖÿ≥€å ŸÇŸÑŸÖÿ≤ŸÜ€å',
        'ÿ™ÿßÿ®ŸÑŸà ŸÅÿ±ÿ¥ ÿØÿ≥ÿ™ÿ®ÿßŸÅ',
        'ÿ∏ÿ±ŸÅ ⁄ÜŸàÿ®€å ŸÖŸÜÿ®ÿ™ ⁄©ÿßÿ±€å',
        'ÿ¨ÿπÿ®Ÿá ÿ¨ŸàÿßŸáÿ±ÿßÿ™ ÿÆÿßÿ™ŸÖ',
        'ÿ≥ÿßÿπÿ™ ÿØ€åŸàÿßÿ±€å ÿ™ÿ∞Ÿá€åÿ®€å',
        'ÿ¢€åŸÜŸá ŸÇÿßÿ® ŸÇŸÑŸÖÿ≤ŸÜ€å',
        'ÿµŸÜÿØŸàŸÇ⁄ÜŸá ⁄ÜŸàÿ®€å ŸÜŸÇÿßÿ¥€å',
        'ÿ±ŸàŸÖ€åÿ≤€å ÿ≥Ÿàÿ≤ŸÜÿØŸàÿ≤€å',
        '⁄©€åŸÅ ÿ≥ŸÜÿ™€å ŸÇŸÑÿßÿ® ÿ®ÿßŸÅ€å',
        'ÿ¥ŸÖÿπÿØÿßŸÜ ÿ®ÿ±ŸÜÿ¨€å',
        'Ÿæÿßÿ±⁄ÜŸá ŸÇŸÑŸÖ⁄©ÿßÿ±',
        '⁄Ø€åŸàŸá ÿØÿ≥ÿ™ÿ®ÿßŸÅ',
        '⁄©ŸÅÿ¥ ⁄Üÿ±ŸÖ ÿØÿ≥ÿ™ ÿØŸàÿ≤',
        'ÿ¨ÿßŸÇŸÑŸÖ€å ŸÖŸÜÿ®ÿ™ ⁄©ÿßÿ±€å',
        'ÿ™ÿßÿ®ŸÑŸà ŸÜŸÇÿßÿ¥€å ÿ±Ÿà€å ⁄Üÿ±ŸÖ'
    ];

    // ÿßÿ∂ÿßŸÅŸá ⁄©ÿ±ÿØŸÜ ŸÇÿßÿ®ŸÑ€åÿ™ Ÿæ€åÿ¥ŸÜŸáÿßÿØ ÿ®ÿ±ÿß€å ÿ¥ÿ±ÿ≠ ⁄©ÿßŸÑÿß
    document.addEventListener('input', function(e) {
        if (e.target.matches('input[placeholder*="ÿ¥ÿ±ÿ≠ ⁄©ÿßŸÑÿß"]')) {
            const input = e.target;
            const value = input.value.toLowerCase();
            
            if (value.length > 2) {
                const suggestions = handicraftItems.filter(item => 
                    item.toLowerCase().includes(value)
                );
                
                // ÿß€åÿ¨ÿßÿØ dropdown Ÿæ€åÿ¥ŸÜŸáÿßÿØÿßÿ™ (ÿ≥ÿßÿØŸá)
                let dropdown = input.parentNode.querySelector('.suggestions');
                if (dropdown) dropdown.remove();
                
                if (suggestions.length > 0) {
                    dropdown = document.createElement('div');
                    dropdown.className = 'suggestions';
                    dropdown.style.cssText = `
                        position: absolute;
                        background: white;
                        border: 1px solid #ddd;
                        border-radius: 5px;
                        max-height: 150px;
                        overflow-y: auto;
                        z-index: 1000;
                        width: 100%;
                        margin-top: 2px;
                        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
                    `;
                    
                    suggestions.slice(0, 5).forEach(suggestion => {
                        const item = document.createElement('div');
                        item.textContent = suggestion;
                        item.style.cssText = `
                            padding: 10px;
                            cursor: pointer;
                            border-bottom: 1px solid #eee;
                        `;
                        item.addEventListener('click', () => {
                            input.value = suggestion;
                            dropdown.remove();
                        });
                        item.addEventListener('mouseenter', () => {
                            item.style.background = '#f0f0f0';
                        });
                        item.addEventListener('mouseleave', () => {
                            item.style.background = 'white';
                        });
                        dropdown.appendChild(item);
                    });
                    
                    input.parentNode.style.position = 'relative';
                    input.parentNode.appendChild(dropdown);
                }
            }
        }
    });

    // ŸÖÿÆŸÅ€å ⁄©ÿ±ÿØŸÜ dropdown ŸáŸÜ⁄ØÿßŸÖ ⁄©ŸÑ€å⁄© ÿÆÿßÿ±ÿ¨ ÿßÿ≤ ÿ¢ŸÜ
    document.addEventListener('click', function(e) {
        if (!e.target.matches('input[placeholder*="ÿ¥ÿ±ÿ≠ ⁄©ÿßŸÑÿß"]')) {
            document.querySelectorAll('.suggestions').forEach(s => s.remove());
        }
    });

    console.log('üé® ÿ≥€åÿ≥ÿ™ŸÖ ŸÅÿß⁄©ÿ™Ÿàÿ± ÿµŸÜÿß€åÿπ ÿØÿ≥ÿ™€å ÿ¢ŸÖÿßÿØŸá ÿßÿ≥ÿ™!');
    console.log('üí° ⁄©ŸÑ€åÿØŸáÿß€å ŸÖ€åÿßŸÜÿ®ÿ±:');
    console.log('   Ctrl+S: ÿ∞ÿÆ€åÿ±Ÿá');
    console.log('   Ctrl+P: ⁄ÜÿßŸæ');
    console.log('   Ctrl+N: ÿßŸÅÿ≤ŸàÿØŸÜ ÿ±ÿØ€åŸÅ ÿ¨ÿØ€åÿØ');
</script>
```

</body>
</html>
